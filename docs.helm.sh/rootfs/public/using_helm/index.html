<!DOCTYPE html>
<html lang="en-us">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <title>Using Helm</title>

  <meta name="description" content="Documentation for Helm - The Kubernetes Package Manager.">
  <meta name="author" content="">
  <meta property="og:title" content="Helm - The Package Manager for Kubernetes." />
  <meta property="og:url" content="https://docs.helm.sh/" />
  <meta property="og:image" content="https://docs.helm.sh//src/img/favicon-152.png" />
  <meta name="google-site-verification" content="dCa3wS47cErhx0IpaxbB85NfcOP-vFxevknVk6fzf5I" />

  <link rel="icon" href="../src/img/favicon-152.png" type="image/x-icon">
  <link rel="apple-touch-icon-precomposed" href="../src/img/apple-touch-icon-precomposed.png">
  <link href="../src/css/styles.min.css" rel="stylesheet">
</head>

<body id="landing">

  <div class="off-canvas-wrap" data-offcanvas>
    <div class="inner-wrap">

      <a class="left-off-canvas-toggle show-for-medium-down" href="#off-canvas-navigation">
        <i class="fa fa-bars"></i>
      </a>
      <aside class="left-off-canvas-menu" id="off-canvas-navigation" data-topbar>
  <div class="drawer-wrap">

    <ul class="off-canvas-list current sidebar-main">
      <li>
        <a class="sidebar-nav-item" href="https://docs.helm.sh/">
          <span class="ripple">Docs Home <span></span></span>
        </a>
      </li>
      
      <li class="sidebar-nav-item toctree-l1 ">
        <a class="reference internal" href="using_helm" state="">
          <span class="ripple">Using Helm <span></span></span>
        </a>
        
        <ul class="current">
          
          <li class="toctree-l2 ">
            <a href="../../using_helm/#quickstart-guide" title="Switch to Quickstart">
              Quickstart
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../using_helm/#installing-helm" title="Switch to Installing Helm">
              Installing Helm
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../using_helm/#kubernetes-distribution-guide" title="Switch to Kubernetes Distro Notes">
              Kubernetes Distro Notes
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../using_helm/#installation-frequently-asked-questions" title="Switch to Install FAQ">
              Install FAQ
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../using_helm/#using-helm" title="Switch to Using Helm">
              Using Helm
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../using_helm/#the-helm-plugins-guide" title="Switch to Plugins">
              Plugins
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../using_helm/#role-based-access-control" title="Switch to Role-Based Access Control">
              Role-Based Access Control
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../using_helm/#using-ssl-between-helm-and-tiller" title="Switch to TLS/SSL for Helm and Tiller">
              TLS/SSL for Helm and Tiller
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../using_helm/#securing-your-helm-installation" title="Switch to Securing Helm">
              Securing Helm
            </a>
          </li>
          
        </ul>
        
      </li>
      
      <li class="sidebar-nav-item toctree-l1 ">
        <a class="reference internal" href="helm" state="">
          <span class="ripple">Helm Commands <span></span></span>
        </a>
        
        <ul class="current">
          
          <li class="toctree-l2 ">
            <a href="../../helm/#helm" title="Switch to Helm">
              Helm
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../helm/#helm-completion" title="Switch to Helm Completion">
              Helm Completion
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../helm/#helm-create" title="Switch to Helm Create">
              Helm Create
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../helm/#helm-delete" title="Switch to Helm Delete">
              Helm Delete
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../helm/#helm-dependency" title="Switch to Helm Dependency">
              Helm Dependency
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../helm/#helm-dependency-build" title="Switch to Helm Dependency Build">
              Helm Dependency Build
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../helm/#helm-dependency-list" title="Switch to Helm Dependency List">
              Helm Dependency List
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../helm/#helm-dependency-update" title="Switch to Helm Dependency Update">
              Helm Dependency Update
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../helm/#helm-fetch" title="Switch to Helm Fetch">
              Helm Fetch
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../helm/#helm-get" title="Switch to Helm Get">
              Helm Get
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../helm/#helm-get-hooks" title="Switch to Helm Get Hooks">
              Helm Get Hooks
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../helm/#helm-get-manifest" title="Switch to Helm Get Manifest">
              Helm Get Manifest
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../helm/#helm-get-values" title="Switch to Helm Get Values">
              Helm Get Values
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../helm/#helm-history" title="Switch to Helm History">
              Helm History
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../helm/#helm-home" title="Switch to Helm Home">
              Helm Home
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../helm/#helm-init" title="Switch to Helm Init">
              Helm Init
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../helm/#helm-inspect" title="Switch to Helm Inspect">
              Helm Inspect
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../helm/#helm-inspect-chart" title="Switch to Helm Inspect Chart">
              Helm Inspect Chart
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../helm/#helm-inspect-values" title="Switch to Helm Inspect Values">
              Helm Inspect Values
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../helm/#helm-install" title="Switch to Helm Install">
              Helm Install
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../helm/#helm-lint" title="Switch to Helm Lint">
              Helm Lint
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../helm/#helm-list" title="Switch to Helm List">
              Helm List
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../helm/#helm-package" title="Switch to Helm Package">
              Helm Package
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../helm/#helm-plugin" title="Switch to Helm Plugin">
              Helm Plugin
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../helm/#helm-plugin-install" title="Switch to Helm Plugin Install">
              Helm Plugin Install
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../helm/#helm-plugin-list" title="Switch to Helm Plugin List">
              Helm Plugin List
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../helm/#helm-plugin-remove" title="Switch to Helm Plugin Remove">
              Helm Plugin Remove
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../helm/#helm-plugin-update" title="Switch to Helm Plugin Update">
              Helm Plugin Update
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../helm/#helm-repo" title="Switch to Helm Repo">
              Helm Repo
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../helm/#helm-repo-add" title="Switch to Helm Repo Add">
              Helm Repo Add
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../helm/#helm-repo-index" title="Switch to Helm Repo Index">
              Helm Repo Index
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../helm/#helm-rep-list" title="Switch to Helm Repo List">
              Helm Repo List
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../helm/#helm-repo-remove" title="Switch to Helm Repo Remove">
              Helm Repo Remove
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../helm/#helm-repo-update" title="Switch to Helm Repo Update">
              Helm Repo Update
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../helm/#helm-reset" title="Switch to Helm Reset">
              Helm Reset
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../helm/#helm-rollback" title="Switch to Helm Rollback">
              Helm Rollback
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../helm/#helm-search" title="Switch to Helm Search">
              Helm Search
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../helm/#helm-serve" title="Switch to Helm Serve">
              Helm Serve
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../helm/#helm-status" title="Switch to Helm Status">
              Helm Status
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../helm/#helm-template" title="Switch to Helm Template">
              Helm Template
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../helm/#helm-test" title="Switch to Helm Test">
              Helm Test
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../helm/#helm-upgrade" title="Switch to Helm Upgrade">
              Helm Upgrade
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../helm/#helm-verify" title="Switch to Helm Verify">
              Helm Verify
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../helm/#helm-version" title="Switch to Helm Version">
              Helm Version
            </a>
          </li>
          
        </ul>
        
      </li>
      
      <li class="sidebar-nav-item toctree-l1 ">
        <a class="reference internal" href="developing_charts" state="">
          <span class="ripple">Charts <span></span></span>
        </a>
        
        <ul class="current">
          
          <li class="toctree-l2 ">
            <a href="../../developing_charts/#charts" title="Switch to Intro to Charts">
              Intro to Charts
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../developing_charts/#hooks" title="Switch to Chart Lifecycle Hooks">
              Chart Lifecycle Hooks
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../developing_charts/#chart-development-tips-and-tricks" title="Switch to Charts Tips and Tricks">
              Charts Tips and Tricks
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../developing_charts/#the-chart-repository-guide" title="Switch to Charts Repository Guide">
              Charts Repository Guide
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../developing_charts/#syncing-your-chart-repository" title="Switch to Syncing Your Chart Repo">
              Syncing Your Chart Repo
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../developing_charts/#helm-provenance-and-integrity" title="Switch to Signing Charts">
              Signing Charts
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../developing_charts/#chart-tests" title="Switch to Chart Tests">
              Chart Tests
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../developing_charts/#chart-repositories-frequently-asked-questions" title="Switch to Chart Repository FAQ">
              Chart Repository FAQ
            </a>
          </li>
          
        </ul>
        
      </li>
      
      <li class="sidebar-nav-item toctree-l1 ">
        <a class="reference internal" href="chart_template_guide" state="">
          <span class="ripple">Developing Templates <span></span></span>
        </a>
        
        <ul class="current">
          
          <li class="toctree-l2 ">
            <a href="../../chart_template_guide/#the-chart-template-developer-s-guide" title="Switch to Intro">
              Intro
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../chart_template_guide/#getting-started-with-a-chart-template" title="Switch to Getting Started">
              Getting Started
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../chart_template_guide/#built-in-objects" title="Switch to Built-In Objects">
              Built-In Objects
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../chart_template_guide/#values-files" title="Switch to Values Files">
              Values Files
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../chart_template_guide/#template-functions-and-pipelines" title="Switch to Template Functions and Pipelines">
              Template Functions and Pipelines
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../chart_template_guide/#flow-control" title="Switch to Flow Control">
              Flow Control
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../chart_template_guide/#variables" title="Switch to Variables">
              Variables
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../chart_template_guide/#named-templates" title="Switch to Named Templates">
              Named Templates
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../chart_template_guide/#accessing-files-inside-templates" title="Switch to Accessing Files Inside Templates">
              Accessing Files Inside Templates
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../chart_template_guide/#creating-a-notes-txt-file" title="Switch to Creating a NOTES.txt File">
              Creating a NOTES.txt File
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../chart_template_guide/#subcharts-and-global-values" title="Switch to Subcharts and Global Values">
              Subcharts and Global Values
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../chart_template_guide/#debugging-templates" title="Switch to Debugging Templates">
              Debugging Templates
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../chart_template_guide/#wrapping-up" title="Switch to Next Steps">
              Next Steps
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../chart_template_guide/#yaml-techniques" title="Switch to Appendix: YAML Techniques">
              Appendix: YAML Techniques
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../chart_template_guide/#appendix-go-data-types-and-templates" title="Switch to Appendix: Go Data Types and Templates">
              Appendix: Go Data Types and Templates
            </a>
          </li>
          
        </ul>
        
      </li>
      
      <li class="sidebar-nav-item toctree-l1 ">
        <a class="reference internal" href="../chart_best_practices/" state="">
          <span class="ripple">Best Practices <span></span></span>
        </a>
        
        <ul class="current">
          
          <li class="toctree-l2 ">
            <a href="../../chart_best_practices/#the-chart-best-practices-guide" title="Switch to Intro">
              Intro
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../chart_best_practices/#general-conventions" title="Switch to General Conventions">
              General Conventions
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../chart_best_practices/#values" title="Switch to Values">
              Values
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../chart_best_practices/#templates" title="Switch to Templates">
              Templates
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../chart_best_practices/#requirements-files" title="Switch to Requirements">
              Requirements
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../chart_best_practices/#labels-and-annotations" title="Switch to Labels &amp; Annotations">
              Labels &amp; Annotations
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../chart_best_practices/#pods-and-podtemplates" title="Switch to Pods &amp; PodTemplates">
              Pods &amp; PodTemplates
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../chart_best_practices/#third-party-resources" title="Switch to Third Party Resources">
              Third Party Resources
            </a>
          </li>
          
        </ul>
        
      </li>
      
      <li class="sidebar-nav-item toctree-l1 ">
        <a class="reference internal" href="../related/" state="">
          <span class="ripple">Related Projects <span></span></span>
        </a>
        
      </li>
      
      <li class="sidebar-nav-item toctree-l1 ">
        <a class="reference internal" href="../architecture/" state="">
          <span class="ripple">Architecture <span></span></span>
        </a>
        
      </li>
      
      <li class="sidebar-nav-item toctree-l1 ">
        <a class="reference internal" href="../developers/" state="">
          <span class="ripple">Developer Guide <span></span></span>
        </a>
        
      </li>
      
      <li class="sidebar-nav-item toctree-l1 ">
        <a class="reference internal" href="../history/" state="">
          <span class="ripple">History <span></span></span>
        </a>
        
      </li>
      
      <li class="sidebar-nav-item toctree-l1 ">
        <a class="reference internal" href="../glossary/" state="">
          <span class="ripple">Glossary <span></span></span>
        </a>
        
      </li>
      
      <li class="sidebar-nav-item toctree-l1 ">
        <a class="reference internal" href="https://hub.kubeapps.com/" state="">
          <span class="ripple">Find Charts <span></span></span>
        </a>
        
      </li>
      
    </ul>

    <div class="drawer-line"></div>

    <div class="button-wrap">
      <a href="https://github.com/kubernetes/helm" class="button small primary expand email-support"><i class="fa fa-github"></i> Contribute to Docs</a>
    </div>

  </div>
</aside>

  <div class="container container-full">
    <div class="sidebar show-for-large-up">
  <h1>
    <a href="../">
      <svg height="50" viewBox="0 0 121 126" xmlns="http://www.w3.org/2000/svg"><title>Helm Logo</title><g fill="none" fill-rule="evenodd"><g fill="#277A9F"><path d="M85.218 94.1435c2.0246-1.4178 6.6492 1.6934 10.3293 6.949 3.68 5.2556 5.0218 10.6654 2.997 12.0832-2.0247 1.4177-6.6493-1.6935-10.3293-6.949-3.68-5.2557-5.022-10.6655-2.997-12.0832zM36.782 94.1435c-2.0246-1.4178-6.6492 1.6934-10.3293 6.949-3.68 5.2556-5.0218 10.6654-2.997 12.0832 2.0247 1.4177 6.6493-1.6935 10.3293-6.949 3.68-5.2557 5.022-10.6655 2.997-12.0832zM60.9755 102.3724c-2.4717 0-4.4755 5.201-4.4755 11.617 0 6.416 2.0038 11.617 4.4755 11.617 2.4718 0 4.4755-5.201 4.4755-11.617 0-6.416-2.0037-11.617-4.4755-11.617z"/></g><g fill="#277A9F"><path d="M85.218 31.8565c2.0246 1.4178 6.6492-1.6934 10.3293-6.949 3.68-5.2556 5.0218-10.6654 2.997-12.0832-2.0247-1.4177-6.6493 1.6935-10.3293 6.949-3.68 5.2557-5.022 10.6655-2.997 12.0832zM36.782 31.8565c-2.0246 1.4178-6.6492-1.6934-10.3293-6.949-3.68-5.2556-5.0218-10.6654-2.997-12.0832 2.0247-1.4177 6.6493 1.6935 10.3293 6.949 3.68 5.2557 5.022 10.6655 2.997 12.0832zM60.9755 23.6276c-2.4717 0-4.4755-5.201-4.4755-11.617 0-6.416 2.0038-11.617 4.4755-11.617 2.4718 0 4.4755 5.201 4.4755 11.617 0 6.416-2.0037 11.617-4.4755 11.617z"/></g><path d="M95.5044 42.1636c-7.2176-11.883-20.2966-19.8232-35.2333-19.8232-14.528 0-27.2986 7.5117-34.6276 18.8568m.7842 45.6688c7.4352 10.689 19.8207 17.6872 33.8435 17.6872 14.0484 0 26.4534-7.0237 33.884-17.7455" stroke="#277A9F" stroke-width="7.1608"/><path d="M.609 47.6948h8.6217v12.1304h9.7244V47.6948h8.6218v32.5818H18.955V67.344H9.2308v12.9326H.609V47.6948zm34.186 0h21.0528v7.218H43.4166v5.113h10.6266v7.218H43.4166v5.8147H56.349v7.218H34.795V47.695zm27.87 0h8.6215v25.3637h12.331v7.218H62.665V47.695zm26.5666 0h8.9224l5.113 13.534 1.8044 5.3133h.2005l1.8044-5.3132 4.9124-13.534h8.9224v32.5818h-8.0202v-9.6242c0-.8354.0418-1.7544.1253-2.757.0836-1.0024.1755-2.03.2757-3.0826.1003-1.0527.2172-2.0803.351-3.0828.1336-1.0025.2505-1.9048.3508-2.7068h-.2005l-2.7068 7.6192-4.5113 10.9775h-3.208l-4.5114-10.9776-2.6066-7.6192h-.2005c.1003.802.2172 1.7043.351 2.7068.1336 1.0025.2505 2.03.3508 3.0828.1002 1.0526.192 2.0802.2757 3.0827.0835 1.0025.1253 1.9215.1253 2.757v9.624h-7.92V47.695z" fill="#277A9F"/></g></svg>
      <span>Documentation</span>
    </a>
  </h1>

  <nav class="sidebar-nav">
    <ul class="current sidebar-main">
      <li>
        <a class="sidebar-nav-item" href="https://docs.helm.sh/">
          <span class="ripple">Docs Home <span></span></span>
        </a>
      </li>
      
      <li class="sidebar-nav-item toctree-l1 ">
        <a class="reference internal" href="using_helm" state="">
          <span class="ripple">Using Helm <span></span></span>
        </a>
        
        <ul class="current">
          
          <li class="toctree-l2 ">
            <a href="../../using_helm/#quickstart-guide" title="Switch to Quickstart">
              Quickstart
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../using_helm/#installing-helm" title="Switch to Installing Helm">
              Installing Helm
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../using_helm/#kubernetes-distribution-guide" title="Switch to Kubernetes Distro Notes">
              Kubernetes Distro Notes
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../using_helm/#installation-frequently-asked-questions" title="Switch to Install FAQ">
              Install FAQ
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../using_helm/#using-helm" title="Switch to Using Helm">
              Using Helm
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../using_helm/#the-helm-plugins-guide" title="Switch to Plugins">
              Plugins
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../using_helm/#role-based-access-control" title="Switch to Role-Based Access Control">
              Role-Based Access Control
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../using_helm/#using-ssl-between-helm-and-tiller" title="Switch to TLS/SSL for Helm and Tiller">
              TLS/SSL for Helm and Tiller
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../using_helm/#securing-your-helm-installation" title="Switch to Securing Helm">
              Securing Helm
            </a>
          </li>
          
        </ul>
        
      </li>
      
      <li class="sidebar-nav-item toctree-l1 ">
        <a class="reference internal" href="helm" state="">
          <span class="ripple">Helm Commands <span></span></span>
        </a>
        
        <ul class="current">
          
          <li class="toctree-l2 ">
            <a href="../../helm/#helm" title="Switch to Helm">
              Helm
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../helm/#helm-completion" title="Switch to Helm Completion">
              Helm Completion
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../helm/#helm-create" title="Switch to Helm Create">
              Helm Create
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../helm/#helm-delete" title="Switch to Helm Delete">
              Helm Delete
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../helm/#helm-dependency" title="Switch to Helm Dependency">
              Helm Dependency
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../helm/#helm-dependency-build" title="Switch to Helm Dependency Build">
              Helm Dependency Build
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../helm/#helm-dependency-list" title="Switch to Helm Dependency List">
              Helm Dependency List
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../helm/#helm-dependency-update" title="Switch to Helm Dependency Update">
              Helm Dependency Update
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../helm/#helm-fetch" title="Switch to Helm Fetch">
              Helm Fetch
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../helm/#helm-get" title="Switch to Helm Get">
              Helm Get
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../helm/#helm-get-hooks" title="Switch to Helm Get Hooks">
              Helm Get Hooks
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../helm/#helm-get-manifest" title="Switch to Helm Get Manifest">
              Helm Get Manifest
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../helm/#helm-get-values" title="Switch to Helm Get Values">
              Helm Get Values
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../helm/#helm-history" title="Switch to Helm History">
              Helm History
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../helm/#helm-home" title="Switch to Helm Home">
              Helm Home
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../helm/#helm-init" title="Switch to Helm Init">
              Helm Init
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../helm/#helm-inspect" title="Switch to Helm Inspect">
              Helm Inspect
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../helm/#helm-inspect-chart" title="Switch to Helm Inspect Chart">
              Helm Inspect Chart
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../helm/#helm-inspect-values" title="Switch to Helm Inspect Values">
              Helm Inspect Values
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../helm/#helm-install" title="Switch to Helm Install">
              Helm Install
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../helm/#helm-lint" title="Switch to Helm Lint">
              Helm Lint
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../helm/#helm-list" title="Switch to Helm List">
              Helm List
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../helm/#helm-package" title="Switch to Helm Package">
              Helm Package
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../helm/#helm-plugin" title="Switch to Helm Plugin">
              Helm Plugin
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../helm/#helm-plugin-install" title="Switch to Helm Plugin Install">
              Helm Plugin Install
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../helm/#helm-plugin-list" title="Switch to Helm Plugin List">
              Helm Plugin List
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../helm/#helm-plugin-remove" title="Switch to Helm Plugin Remove">
              Helm Plugin Remove
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../helm/#helm-plugin-update" title="Switch to Helm Plugin Update">
              Helm Plugin Update
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../helm/#helm-repo" title="Switch to Helm Repo">
              Helm Repo
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../helm/#helm-repo-add" title="Switch to Helm Repo Add">
              Helm Repo Add
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../helm/#helm-repo-index" title="Switch to Helm Repo Index">
              Helm Repo Index
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../helm/#helm-rep-list" title="Switch to Helm Repo List">
              Helm Repo List
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../helm/#helm-repo-remove" title="Switch to Helm Repo Remove">
              Helm Repo Remove
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../helm/#helm-repo-update" title="Switch to Helm Repo Update">
              Helm Repo Update
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../helm/#helm-reset" title="Switch to Helm Reset">
              Helm Reset
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../helm/#helm-rollback" title="Switch to Helm Rollback">
              Helm Rollback
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../helm/#helm-search" title="Switch to Helm Search">
              Helm Search
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../helm/#helm-serve" title="Switch to Helm Serve">
              Helm Serve
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../helm/#helm-status" title="Switch to Helm Status">
              Helm Status
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../helm/#helm-template" title="Switch to Helm Template">
              Helm Template
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../helm/#helm-test" title="Switch to Helm Test">
              Helm Test
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../helm/#helm-upgrade" title="Switch to Helm Upgrade">
              Helm Upgrade
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../helm/#helm-verify" title="Switch to Helm Verify">
              Helm Verify
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../helm/#helm-version" title="Switch to Helm Version">
              Helm Version
            </a>
          </li>
          
        </ul>
        
      </li>
      
      <li class="sidebar-nav-item toctree-l1 ">
        <a class="reference internal" href="developing_charts" state="">
          <span class="ripple">Charts <span></span></span>
        </a>
        
        <ul class="current">
          
          <li class="toctree-l2 ">
            <a href="../../developing_charts/#charts" title="Switch to Intro to Charts">
              Intro to Charts
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../developing_charts/#hooks" title="Switch to Chart Lifecycle Hooks">
              Chart Lifecycle Hooks
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../developing_charts/#chart-development-tips-and-tricks" title="Switch to Charts Tips and Tricks">
              Charts Tips and Tricks
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../developing_charts/#the-chart-repository-guide" title="Switch to Charts Repository Guide">
              Charts Repository Guide
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../developing_charts/#syncing-your-chart-repository" title="Switch to Syncing Your Chart Repo">
              Syncing Your Chart Repo
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../developing_charts/#helm-provenance-and-integrity" title="Switch to Signing Charts">
              Signing Charts
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../developing_charts/#chart-tests" title="Switch to Chart Tests">
              Chart Tests
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../developing_charts/#chart-repositories-frequently-asked-questions" title="Switch to Chart Repository FAQ">
              Chart Repository FAQ
            </a>
          </li>
          
        </ul>
        
      </li>
      
      <li class="sidebar-nav-item toctree-l1 ">
        <a class="reference internal" href="chart_template_guide" state="">
          <span class="ripple">Developing Templates <span></span></span>
        </a>
        
        <ul class="current">
          
          <li class="toctree-l2 ">
            <a href="../../chart_template_guide/#the-chart-template-developer-s-guide" title="Switch to Intro">
              Intro
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../chart_template_guide/#getting-started-with-a-chart-template" title="Switch to Getting Started">
              Getting Started
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../chart_template_guide/#built-in-objects" title="Switch to Built-In Objects">
              Built-In Objects
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../chart_template_guide/#values-files" title="Switch to Values Files">
              Values Files
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../chart_template_guide/#template-functions-and-pipelines" title="Switch to Template Functions and Pipelines">
              Template Functions and Pipelines
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../chart_template_guide/#flow-control" title="Switch to Flow Control">
              Flow Control
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../chart_template_guide/#variables" title="Switch to Variables">
              Variables
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../chart_template_guide/#named-templates" title="Switch to Named Templates">
              Named Templates
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../chart_template_guide/#accessing-files-inside-templates" title="Switch to Accessing Files Inside Templates">
              Accessing Files Inside Templates
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../chart_template_guide/#creating-a-notes-txt-file" title="Switch to Creating a NOTES.txt File">
              Creating a NOTES.txt File
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../chart_template_guide/#subcharts-and-global-values" title="Switch to Subcharts and Global Values">
              Subcharts and Global Values
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../chart_template_guide/#debugging-templates" title="Switch to Debugging Templates">
              Debugging Templates
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../chart_template_guide/#wrapping-up" title="Switch to Next Steps">
              Next Steps
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../chart_template_guide/#yaml-techniques" title="Switch to Appendix: YAML Techniques">
              Appendix: YAML Techniques
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../chart_template_guide/#appendix-go-data-types-and-templates" title="Switch to Appendix: Go Data Types and Templates">
              Appendix: Go Data Types and Templates
            </a>
          </li>
          
        </ul>
        
      </li>
      
      <li class="sidebar-nav-item toctree-l1 ">
        <a class="reference internal" href="../chart_best_practices/" state="">
          <span class="ripple">Best Practices <span></span></span>
        </a>
        
        <ul class="current">
          
          <li class="toctree-l2 ">
            <a href="../../chart_best_practices/#the-chart-best-practices-guide" title="Switch to Intro">
              Intro
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../chart_best_practices/#general-conventions" title="Switch to General Conventions">
              General Conventions
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../chart_best_practices/#values" title="Switch to Values">
              Values
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../chart_best_practices/#templates" title="Switch to Templates">
              Templates
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../chart_best_practices/#requirements-files" title="Switch to Requirements">
              Requirements
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../chart_best_practices/#labels-and-annotations" title="Switch to Labels &amp; Annotations">
              Labels &amp; Annotations
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../chart_best_practices/#pods-and-podtemplates" title="Switch to Pods &amp; PodTemplates">
              Pods &amp; PodTemplates
            </a>
          </li>
          
          <li class="toctree-l2 ">
            <a href="../../chart_best_practices/#third-party-resources" title="Switch to Third Party Resources">
              Third Party Resources
            </a>
          </li>
          
        </ul>
        
      </li>
      
      <li class="sidebar-nav-item toctree-l1 ">
        <a class="reference internal" href="../related/" state="">
          <span class="ripple">Related Projects <span></span></span>
        </a>
        
      </li>
      
      <li class="sidebar-nav-item toctree-l1 ">
        <a class="reference internal" href="../architecture/" state="">
          <span class="ripple">Architecture <span></span></span>
        </a>
        
      </li>
      
      <li class="sidebar-nav-item toctree-l1 ">
        <a class="reference internal" href="../developers/" state="">
          <span class="ripple">Developer Guide <span></span></span>
        </a>
        
      </li>
      
      <li class="sidebar-nav-item toctree-l1 ">
        <a class="reference internal" href="../history/" state="">
          <span class="ripple">History <span></span></span>
        </a>
        
      </li>
      
      <li class="sidebar-nav-item toctree-l1 ">
        <a class="reference internal" href="../glossary/" state="">
          <span class="ripple">Glossary <span></span></span>
        </a>
        
      </li>
      
      <li class="sidebar-nav-item toctree-l1 ">
        <a class="reference internal" href="https://hub.kubeapps.com/" state="">
          <span class="ripple">Find Charts <span></span></span>
        </a>
        
      </li>
      
    </ul>
  </nav>

  <aside class="sidebar-buttons">
    <div class="button-wrap">
      <a href="https://github.com/kubernetes/helm" class="button small primary expand email-support"><i class="fa fa-github"></i> Contribute to Docs</a>
    </div>
  </aside>
</div>


    <div class="main page" id="scrollpane">
      <nav class="top-bar">
  <div class="breadcrumb">
    <a href="../">Using Helm</a>
  </div>
  <ul class="inline right text-right">
    <li><a href="https://helm.sh" target="_blank" title="Find out more about Helm."><i class="fa fa-home"></i> Helm.sh</a></li>
    <li><a href="https://github.com/kubernetes/helm" target="_blank" title="Go to the Helm project on Github."><i class="fa fa-github"></i> Github</a></li>
    <li><a href="https://hub.kubeapps.com" target="_blank" title="Go search and discover apps via Monocular, the Chart directory for Helm."><i class="fa fa-search"></i> Find Charts</a></li>
  </ul>
</nav>


      <div class="row">
        <div class="small-1 columns">&nbsp;</div>
        <div class="small-10 columns content-wrap">
          
            <article id="">
  <div>

<h1 id="quickstart-guide">Quickstart Guide</h1>

<p>This guide covers how you can quickly get started using Helm.</p>

<h2 id="prerequisites">Prerequisites</h2>

<p>The following prerequisites are required for a successful and properly secured use of Helm.</p>

<ol>
<li>A Kubernetes cluster</li>
<li>Deciding what security configurations to apply to your installation, if any</li>
<li>Installing and configuring Helm and Tiller, the cluster-side service.</li>
</ol>

<h3 id="install-kubernetes-or-have-access-to-a-cluster">Install Kubernetes or have access to a cluster</h3>

<ul>
<li>You must have Kubernetes installed. For the latest release of Helm, we recommend the latest stable release of Kubernetes, which in most cases is the second-latest minor release.</li>
<li>You should also have a local configured copy of <code>kubectl</code>.</li>
</ul>

<p>NOTE: Kubernetes versions prior to 1.6 have limited or no support for role-based access controls (RBAC).</p>

<p>Helm will figure out where to install Tiller by reading your Kubernetes
configuration file (usually <code>$HOME/.kube/config</code>). This is the same file
that <code>kubectl</code> uses.</p>

<p>To find out which cluster Tiller would install to, you can run
<code>kubectl config current-context</code> or <code>kubectl cluster-info</code>.</p>

<pre><code class="language-console">$ kubectl config current-context
my-cluster
</code></pre>

<h3 id="understand-your-security-context">Understand your Security Context</h3>

<p>As with all powerful tools, ensure you are installing it correctly for your scenario.</p>

<p>If you&rsquo;re using Helm on a cluster that you completely control, like minikube or a cluster on a private network in which sharing is not a concern, the default installation &ndash; which applies no security configuration &ndash; is fine, and it&rsquo;s definitely the easiest. To install Helm without additional security steps, <a href="#Install-Helm">install Helm</a> and then <a href="#initialize-helm-and-install-tiller">initialize Helm</a>.</p>

<p>However, if your cluster is exposed to a larger network or if you share your cluster with others &ndash; production clusters fall into this category &ndash; you must take extra steps to secure your installation to prevent careless or malicious actors from damaging the cluster or its data. To apply configurations that secure Helm for use in production environments and other multi-tenant scenarios, see <a href="./#securing-your-helm-installation">Securing a Helm installation</a></p>

<p>If your cluster has Role-Based Access Control (RBAC) enabled, you may want
to <a href="./#rbac">configure a service account and rules</a> before proceeding.</p>

<h2 id="install-helm">Install Helm</h2>

<p>Download a binary release of the Helm client. You can use tools like
<code>homebrew</code>, or look at <a href="https://github.com/kubernetes/helm/releases">the official releases page</a>.</p>

<p>For more details, or for other options, see <a href="../using_helm/#installing-helm">the installation
guide</a>.</p>

<h2 id="initialize-helm-and-install-tiller">Initialize Helm and Install Tiller</h2>

<p>Once you have Helm ready, you can initialize the local CLI and also
install Tiller into your Kubernetes cluster in one step:</p>

<pre><code class="language-console">$ helm init
</code></pre>

<p>This will install Tiller into the Kubernetes cluster you saw with
<code>kubectl config current-context</code>.</p>

<p><strong>TIP:</strong> Want to install into a different cluster? Use the
<code>--kube-context</code> flag.</p>

<p><strong>TIP:</strong> When you want to upgrade Tiller, just run <code>helm init --upgrade</code>.</p>

<p>By default, when Tiller is installed,it does not have authentication enabled.
To learn more about configuring strong TLS authentication for Tiller, consult
<a href="./#using-ssl-between-helm-and-tiller">the Tiller TLS guide</a>.</p>

<h2 id="install-an-example-chart">Install an Example Chart</h2>

<p>To install a chart, you can run the <code>helm install</code> command. Helm has
several ways to find and install a chart, but the easiest is to use one
of the official <code>stable</code> charts.</p>

<pre><code class="language-console">$ helm repo update              # Make sure we get the latest list of charts
$ helm install stable/mysql
Released smiling-penguin
</code></pre>

<p>In the example above, the <code>stable/mysql</code> chart was released, and the name of
our new release is <code>smiling-penguin</code>. You get a simple idea of the
features of this MySQL chart by running <code>helm inspect stable/mysql</code>.</p>

<p>Whenever you install a chart, a new release is created. So one chart can
be installed multiple times into the same cluster. And each can be
independently managed and upgraded.</p>

<p>The <code>helm install</code> command is a very powerful command with many
capabilities. To learn more about it, check out the <a href="./#using_helm">Using Helm
Guide</a></p>

<h2 id="learn-about-releases">Learn About Releases</h2>

<p>It&rsquo;s easy to see what has been released using Helm:</p>

<pre><code class="language-console">$ helm ls
NAME             VERSION   UPDATED          STATUS   CHART
smiling-penguin  1         Wed Sep 28 12:59:46 2016  DEPLOYED  mysql-0.1.0
</code></pre>

<p>The <code>helm list</code> function will show you a list of all deployed releases.</p>

<h2 id="uninstall-a-release">Uninstall a Release</h2>

<p>To uninstall a release, use the <code>helm delete</code> command:</p>

<pre><code class="language-console">$ helm delete smiling-penguin
Removed smiling-penguin
</code></pre>

<p>This will uninstall <code>smiling-penguin</code> from Kubernetes, but you will
still be able to request information about that release:</p>

<pre><code class="language-console">$ helm status smiling-penguin
Status: DELETED
...
</code></pre>

<p>Because Helm tracks your releases even after you&rsquo;ve deleted them, you
can audit a cluster&rsquo;s history, and even undelete a release (with <code>helm
rollback</code>).</p>

<h2 id="reading-the-help-text">Reading the Help Text</h2>

<p>To learn more about the available Helm commands, use <code>helm help</code> or type
a command followed by the <code>-h</code> flag:</p>

<pre><code class="language-console">$ helm get -h
</code></pre>

<h1 id="installing-helm">Installing Helm</h1>

<p>There are two parts to Helm: The Helm client (<code>helm</code>) and the Helm
server (Tiller). This guide shows how to install the client, and then
proceeds to show two ways to install the server.</p>

<p><strong>IMPORTANT</strong>: If you are responsible for ensuring your cluster is a controlled environment, especially when resources are shared, it is strongly recommended installing Tiller using a secured configuration. For guidance, see <a href="./#securing-your-helm-installation">Securing your Helm Installation</a>.</p>

<h2 id="installing-the-helm-client">Installing the Helm Client</h2>

<p>The Helm client can be installed either from source, or from pre-built binary
releases.</p>

<h3 id="from-the-binary-releases">From the Binary Releases</h3>

<p>Every <a href="https://github.com/kubernetes/helm/releases">release</a> of Helm
provides binary releases for a variety of OSes. These binary versions
can be manually downloaded and installed.</p>

<ol>
<li>Download your <a href="https://github.com/kubernetes/helm/releases">desired version</a></li>
<li>Unpack it (<code>tar -zxvf helm-v2.0.0-linux-amd64.tgz</code>)</li>
<li>Find the <code>helm</code> binary in the unpacked directory, and move it to its
desired destination (<code>mv linux-amd64/helm /usr/local/bin/helm</code>)</li>
</ol>

<p>From there, you should be able to run the client: <code>helm help</code>.</p>

<h3 id="from-homebrew-macos">From Homebrew (macOS)</h3>

<p>Members of the Kubernetes community have contributed a Helm formula build to
Homebrew. This formula is generally up to date.</p>

<pre><code>brew install kubernetes-helm
</code></pre>

<p>(Note: There is also a formula for emacs-helm, which is a different
project.)</p>

<h2 id="from-script">From Script</h2>

<p>Helm now has an installer script that will automatically grab the latest version
of the Helm client and <a href="https://raw.githubusercontent.com/kubernetes/helm/master/scripts/get">install it locally</a>.</p>

<p>You can fetch that script, and then execute it locally. It&rsquo;s well documented so
that you can read through it and understand what it is doing before you run it.</p>

<pre><code>$ curl https://raw.githubusercontent.com/kubernetes/helm/master/scripts/get &gt; get_helm.sh
$ chmod 700 get_helm.sh
$ ./get_helm.sh
</code></pre>

<p>Yes, you can <code>curl https://raw.githubusercontent.com/kubernetes/helm/master/scripts/get | bash</code> that if you want to live on the edge.</p>

<h3 id="from-canary-builds">From Canary Builds</h3>

<p>&ldquo;Canary&rdquo; builds are versions of the Helm software that are built from
the latest master branch. They are not official releases, and may not be
stable. However, they offer the opportunity to test the cutting edge
features.</p>

<p>Canary Helm binaries are stored in the <a href="https://kubernetes-helm.storage.googleapis.com">Kubernetes Helm GCS bucket</a>.
Here are links to the common builds:</p>

<ul>
<li><a href="https://kubernetes-helm.storage.googleapis.com/helm-canary-linux-amd64.tar.gz">Linux AMD64</a></li>
<li><a href="https://kubernetes-helm.storage.googleapis.com/helm-canary-darwin-amd64.tar.gz">macOS AMD64</a></li>
<li><a href="https://kubernetes-helm.storage.googleapis.com/helm-canary-windows-amd64.zip">Experimental Windows AMD64</a></li>
</ul>

<h3 id="from-source-linux-macos">From Source (Linux, macOS)</h3>

<p>Building Helm from source is slightly more work, but is the best way to
go if you want to test the latest (pre-release) Helm version.</p>

<p>You must have a working Go environment with
<a href="https://github.com/Masterminds/glide">glide</a> and Mercurial installed.</p>

<pre><code class="language-console">$ cd $GOPATH
$ mkdir -p src/k8s.io
$ cd src/k8s.io
$ git clone https://github.com/kubernetes/helm.git
$ cd helm
$ make bootstrap build
</code></pre>

<p>The <code>bootstrap</code> target will attempt to install dependencies, rebuild the
<code>vendor/</code> tree, and validate configuration.</p>

<p>The <code>build</code> target will compile <code>helm</code> and place it in <code>bin/helm</code>.
Tiller is also compiled, and is placed in <code>bin/tiller</code>.</p>

<h2 id="installing-tiller">Installing Tiller</h2>

<p>Tiller, the server portion of Helm, typically runs inside of your
Kubernetes cluster. But for development, it can also be run locally, and
configured to talk to a remote Kubernetes cluster.</p>

<h3 id="easy-in-cluster-installation">Easy In-Cluster Installation</h3>

<p>The easiest way to install <code>tiller</code> into the cluster is simply to run
<code>helm init</code>. This will validate that <code>helm</code>&rsquo;s local environment is set
up correctly (and set it up if necessary). Then it will connect to
whatever cluster <code>kubectl</code> connects to by default (<code>kubectl config
view</code>). Once it connects, it will install <code>tiller</code> into the
<code>kube-system</code> namespace.</p>

<p>After <code>helm init</code>, you should be able to run <code>kubectl get pods --namespace
kube-system</code> and see Tiller running.</p>

<p>You can explicitly tell <code>helm init</code> to&hellip;</p>

<ul>
<li>Install the canary build with the <code>--canary-image</code> flag</li>
<li>Install a particular image (version) with <code>--tiller-image</code></li>
<li>Install to a particular cluster with <code>--kube-context</code></li>
<li>Install into a particular namespace with <code>--tiller-namespace</code></li>
</ul>

<p>Once Tiller is installed, running <code>helm version</code> should show you both
the client and server version. (If it shows only the client version,
<code>helm</code> cannot yet connect to the server. Use <code>kubectl</code> to see if any
<code>tiller</code> pods are running.)</p>

<p>Helm will look for Tiller in the <code>kube-system</code> namespace unless
<code>--tiller-namespace</code> or <code>TILLER_NAMESPACE</code> is set.</p>

<h3 id="installing-tiller-canary-builds">Installing Tiller Canary Builds</h3>

<p>Canary images are built from the <code>master</code> branch. They may not be
stable, but they offer you the chance to test out the latest features.</p>

<p>The easiest way to install a canary image is to use <code>helm init</code> with the
<code>--canary-image</code> flag:</p>

<pre><code class="language-console">$ helm init --canary-image
</code></pre>

<p>This will use the most recently built container image. You can always
uninstall Tiller by deleting the Tiller deployment from the
<code>kube-system</code> namespace using <code>kubectl</code>.</p>

<h3 id="running-tiller-locally">Running Tiller Locally</h3>

<p>For development, it is sometimes easier to work on Tiller locally, and
configure it to connect to a remote Kubernetes cluster.</p>

<p>The process of building Tiller is explained above.</p>

<p>Once <code>tiller</code> has been built, simply start it:</p>

<pre><code class="language-console">$ bin/tiller
Tiller running on :44134
</code></pre>

<p>When Tiller is running locally, it will attempt to connect to the
Kubernetes cluster that is configured by <code>kubectl</code>. (Run <code>kubectl config
view</code> to see which cluster that is.)</p>

<p>You must tell <code>helm</code> to connect to this new local Tiller host instead of
connecting to the one in-cluster. There are two ways to do this. The
first is to specify the <code>--host</code> option on the command line. The second
is to set the <code>$HELM_HOST</code> environment variable.</p>

<pre><code class="language-console">$ export HELM_HOST=localhost:44134
$ helm version # Should connect to localhost.
Client: &amp;version.Version{SemVer:&quot;v2.0.0-alpha.4&quot;, GitCommit:&quot;db...&quot;, GitTreeState:&quot;dirty&quot;}
Server: &amp;version.Version{SemVer:&quot;v2.0.0-alpha.4&quot;, GitCommit:&quot;a5...&quot;, GitTreeState:&quot;dirty&quot;}
</code></pre>

<p>Importantly, even when running locally, Tiller will store release
configuration in ConfigMaps inside of Kubernetes.</p>

<h2 id="upgrading-tiller">Upgrading Tiller</h2>

<p>As of Helm 2.2.0, Tiller can be upgraded using <code>helm init --upgrade</code>.</p>

<p>For older versions of Helm, or for manual upgrades, you can use <code>kubectl</code> to modify
the Tiller image:</p>

<pre><code class="language-console">$ export TILLER_TAG=v2.0.0-beta.1        # Or whatever version you want
$ kubectl --namespace=kube-system set image deployments/tiller-deploy tiller=gcr.io/kubernetes-helm/tiller:$TILLER_TAG
deployment &quot;tiller-deploy&quot; image updated
</code></pre>

<p>Setting <code>TILLER_TAG=canary</code> will get the latest snapshot of master.</p>

<h2 id="deleting-or-reinstalling-tiller">Deleting or Reinstalling Tiller</h2>

<p>Because Tiller stores its data in Kubernetes ConfigMaps, you can safely
delete and re-install Tiller without worrying about losing any data. The
recommended way of deleting Tiller is with <code>kubectl delete deployment
tiller-deploy --namespace kube-system</code>, or more concisely <code>helm reset</code>.</p>

<p>Tiller can then be re-installed from the client with:</p>

<pre><code class="language-console">$ helm init
</code></pre>

<h2 id="advanced-usage">Advanced Usage</h2>

<p><code>helm init</code> provides additional flags for modifying Tiller&rsquo;s deployment
manifest before it is installed.</p>

<h3 id="using-node-selectors">Using <code>--node-selectors</code></h3>

<p>The <code>--node-selectors</code> flag allows us to specify the node labels required
for scheduling the Tiller pod.</p>

<p>The example below will create the specified label under the nodeSelector
property.</p>

<pre><code>helm init --node-selectors &quot;beta.kubernetes.io/os&quot;=&quot;linux&quot;
</code></pre>

<p>The installed deployment manifest will contain our node selector label.</p>

<pre><code>...
spec:
  template:
    spec:
      nodeSelector:
        beta.kubernetes.io/os: linux
...
</code></pre>

<h3 id="using-override">Using <code>--override</code></h3>

<p><code>--override</code> allows you to specify properties of Tiller&rsquo;s
deployment manifest. Unlike the <code>--set</code> command used elsewhere in Helm,
<code>helm init --override</code> manipulates the specified properties of the final
manifest (there is no &ldquo;values&rdquo; file). Therefore you may specify any valid
value for any valid property in the deployment manifest.</p>

<h4 id="override-annotation">Override annotation</h4>

<p>In the example below we use <code>--override</code> to add the revision property and set
its value to 1.</p>

<pre><code>helm init --override metadata.annotations.&quot;deployment\.kubernetes\.io/revision&quot;=&quot;1&quot;
</code></pre>

<p>Output:</p>

<pre><code>apiVersion: extensions/v1beta1
kind: Deployment
metadata:
  annotations:
    deployment.kubernetes.io/revision: &quot;1&quot;
...
</code></pre>

<h4 id="override-affinity">Override affinity</h4>

<p>In the example below we set properties for node affinity. Multiple
<code>--override</code> commands may be combined to modify different properties of the
same list item.</p>

<pre><code>helm init --override &quot;spec.template.spec.affinity.nodeAffinity.preferredDuringSchedulingIgnoredDuringExecution[0].weight&quot;=&quot;1&quot; --override &quot;spec.template.spec.affinity.nodeAffinity.preferredDuringSchedulingIgnoredDuringExecution[0].preference.matchExpressions[0].key&quot;=&quot;e2e-az-name&quot;
</code></pre>

<p>The specified properties are combined into the
&ldquo;preferredDuringSchedulingIgnoredDuringExecution&rdquo; property&rsquo;s first
list item.</p>

<pre><code>...
spec:
  strategy: {}
  template:
    ...
    spec:
      affinity:
        nodeAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
          - preference:
              matchExpressions:
              - key: e2e-az-name
                operator: &quot;&quot;
            weight: 1
...
</code></pre>

<h3 id="using-output">Using <code>--output</code></h3>

<p>The <code>--output</code> flag allows us skip the installation of Tiller&rsquo;s deployment
manifest and simply output the deployment manifest to stdout in either
JSON or YAML format. The output may then be modified with tools like <code>jq</code>
and installed manually with <code>kubectl</code>.</p>

<p>In the example below we execute <code>helm init</code> with the <code>--output json</code> flag.</p>

<pre><code>helm init --output json
</code></pre>

<p>The Tiller installation is skipped and the manifest is output to stdout
in JSON format.</p>

<pre><code>&quot;apiVersion&quot;: &quot;extensions/v1beta1&quot;,
&quot;kind&quot;: &quot;Deployment&quot;,
&quot;metadata&quot;: {
    &quot;creationTimestamp&quot;: null,
    &quot;labels&quot;: {
        &quot;app&quot;: &quot;helm&quot;,
        &quot;name&quot;: &quot;tiller&quot;
    },
    &quot;name&quot;: &quot;tiller-deploy&quot;,
    &quot;namespace&quot;: &quot;kube-system&quot;
},
...
</code></pre>

<h3 id="storage-backends">Storage backends</h3>

<p>By default, <code>tiller</code> stores release information in <code>ConfigMaps</code> in the namespace
where it is running. As of Helm 2.7.0, there is now a beta storage backend that
uses <code>Secrets</code> for storing release information. This was added for additional
security in protecting charts in conjunction with the release of <code>Secret</code>
encryption in Kubernetes.</p>

<p>To enable the secrets backend, you&rsquo;ll need to init Tiller with the following
options:</p>

<pre><code class="language-shell">helm init --override 'spec.template.spec.containers[0].command'='{/tiller,--storage=secret}'
</code></pre>

<p>Currently, if you want to switch from the default backend to the secrets
backend, you&rsquo;ll have to do the migration for this on your own. When this backend
graduates from beta, there will be a more official path of migration</p>

<h2 id="conclusion">Conclusion</h2>

<p>In most cases, installation is as simple as getting a pre-built <code>helm</code> binary
and running <code>helm init</code>. This document covers additional cases for those
who want to do more sophisticated things with Helm.</p>

<p>Once you have the Helm Client and Tiller successfully installed, you can
move on to using Helm to manage charts.</p>

<h1 id="kubernetes-distribution-guide">Kubernetes Distribution Guide</h1>

<p>This document captures information about using Helm in specific Kubernetes
environments.</p>

<p>We are trying to add more details to this document. Please contribute via Pull
Requests if you can.</p>

<h2 id="minikube">MiniKube</h2>

<p>Helm is tested and known to work with <a href="https://github.com/kubernetes/minikube">minikube</a>.
It requires no additional configuration.</p>

<h2 id="scripts-local-cluster-and-hyperkube"><code>scripts/local-cluster</code> and Hyperkube</h2>

<p>Hyperkube configured via <code>scripts/local-cluster.sh</code> is known to work. For raw
Hyperkube you may need to do some manual configuration.</p>

<h2 id="gke">GKE</h2>

<p>Google&rsquo;s GKE hosted Kubernetes platform is known to work with Helm, and requires
no additional configuration.</p>

<h2 id="ubuntu-with-kubeadm">Ubuntu with &lsquo;kubeadm&rsquo;</h2>

<p>Kubernetes bootstrapped with <code>kubeadm</code> is known to work on the following Linux
distributions:</p>

<ul>
<li>Ubuntu 16.04</li>
<li>Fedora release 25</li>
</ul>

<p>Some versions of Helm (v2.0.0-beta2) require you to <code>export KUBECONFIG=/etc/kubernetes/admin.conf</code>
or create a <code>~/.kube/config</code>.</p>

<h2 id="container-linux-by-coreos">Container Linux by CoreOS</h2>

<p>Helm requires that kubelet have access to a copy of the <code>socat</code> program to proxy connections to the Tiller API. On Container Linux the Kubelet runs inside of a <a href="https://github.com/kubernetes/kubernetes/tree/master/cluster/images/hyperkube">hyperkube</a> container image that has socat. So, even though Container Linux doesn&rsquo;t ship <code>socat</code> the container filesystem running kubelet does have socat. To learn more read the <a href="https://coreos.com/kubernetes/docs/latest/kubelet-wrapper.html">Kubelet Wrapper</a> docs.</p>

<h2 id="openshift">Openshift</h2>

<p>Helm works straightforward on OpenShift Online, OpenShift Dedicated, OpenShift Container Platform (version &gt;= 3.6) or OpenShift Origin (version &gt;= 3.6). To learn more read <a href="https://blog.openshift.com/getting-started-helm-openshift/">this blog</a> post.</p>

<h2 id="platform9">Platform9</h2>

<p>Helm Client and Helm Server (Tiller) are pre-installed with <a href="https://platform9.com/managed-kubernetes/?utm_source=helm_distro_notes">Platform9 Managed Kubernetes</a>. Platform9 provides access to all official Helm charts through the App Catalog UI and native Kubernetes CLI. Additional repositories can be manually added. Further details are availble in this <a href="https://platform9.com/support/deploying-kubernetes-apps-platform9-managed-kubernetes/?utm_source=helm_distro_notes">Platform9 App Catalog article</a>.</p>

<h1 id="installation-frequently-asked-questions">Installation: Frequently Asked Questions</h1>

<p>This section tracks some of the more frequently encountered issues with installing
or getting started with Helm.</p>

<p><strong>We&rsquo;d love your help</strong> making this document better. To add, correct, or remove
information, <a href="https://github.com/kubernetes/helm/issues">file an issue</a> or
send us a pull request.</p>

<h2 id="downloading">Downloading</h2>

<p>I want to know more about my downloading options.</p>

<p><strong>Q: I can&rsquo;t get to GitHub releases of the newest Helm. Where are they?</strong></p>

<p>A: We no longer use GitHub releases. Binaries are now stored in a
<a href="https://kubernetes-helm.storage.googleapis.com">GCS public bucket</a>.</p>

<p><strong>Q: Why aren&rsquo;t there Debian/Fedora/&hellip; native packages of Helm?</strong></p>

<p>We&rsquo;d love to provide these or point you toward a trusted provider. If you&rsquo;re
interested in helping, we&rsquo;d love it. This is how the Homebrew formula was
started.</p>

<p><strong>Q: Why do you provide a <code>curl ...|bash</code> script?</strong></p>

<p>A: There is a script in our repository (<code>scripts/get</code>) that can be executed as
a <code>curl ..|bash</code> script. The transfers are all protected by HTTPS, and the script
does some auditing of the packages it fetches. However, the script has all the
usual dangers of any shell script.</p>

<p>We provide it because it is useful, but we suggest that users carefully read the
script first. What we&rsquo;d really like, though, are better packaged releases of
Helm.</p>

<h2 id="installing">Installing</h2>

<p>I&rsquo;m trying to install Helm/Tiller, but something is not right.</p>

<p><strong>Q: How do I put the Helm client files somewhere other than ~/.helm?</strong></p>

<p>Set the <code>$HELM_HOME</code> environment variable, and then run <code>helm init</code>:</p>

<pre><code class="language-console">export HELM_HOME=/some/path
helm init --client-only
</code></pre>

<p>Note that if you have existing repositories, you will need to re-add them
with <code>helm repo add...</code>.</p>

<p><strong>Q: How do I configure Helm, but not install Tiller?</strong></p>

<p>A: By default, <code>helm init</code> will ensure that the local <code>$HELM_HOME</code> is configured,
and then install Tiller on your cluster. To locally configure, but not install
Tiller, use <code>helm init --client-only</code>.</p>

<p><strong>Q: How do I manually install Tiller on the cluster?</strong></p>

<p>A: Tiller is installed as a Kubernetes <code>deployment</code>. You can get the manifest
by running <code>helm init --dry-run --debug</code>, and then manually install it with
<code>kubectl</code>. It is suggested that you do not remove or change the labels on that
deployment, as they are sometimes used by supporting scripts and tools.</p>

<p><strong>Q: Why do I get <code>Error response from daemon: target is unknown</code> during Tiller install?</strong></p>

<p>A: Users have reported being unable to install Tiller on Kubernetes instances that
are using Docker 1.13.0. The root cause of this was a bug in Docker that made
that one version incompatible with images pushed to the Docker registry by
earlier versions of Docker.</p>

<p>This <a href="https://github.com/docker/docker/issues/30083">issue</a> was fixed shortly
after the release, and is available in Docker 1.13.1-RC1 and later.</p>

<h2 id="getting-started">Getting Started</h2>

<p>I successfully installed Helm/Tiller but I can&rsquo;t use it.</p>

<p><strong>Q: Trying to use Helm, I get the error &ldquo;client transport was broken&rdquo;</strong></p>

<pre><code>E1014 02:26:32.885226   16143 portforward.go:329] an error occurred forwarding 37008 -&gt; 44134: error forwarding port 44134 to pod tiller-deploy-2117266891-e4lev_kube-system, uid : unable to do port forwarding: socat not found.
2016/10/14 02:26:32 transport: http2Client.notifyError got notified that the client transport was broken EOF.
Error: transport is closing
</code></pre>

<p>A: This is usually a good indication that Kubernetes is not set up to allow port forwarding.</p>

<p>Typically, the missing piece is <code>socat</code>. If you are running CoreOS, we have been
told that it may have been misconfigured on installation. The CoreOS team
recommends reading this:</p>

<ul>
<li><a href="https://coreos.com/kubernetes/docs/latest/kubelet-wrapper.html">https://coreos.com/kubernetes/docs/latest/kubelet-wrapper.html</a></li>
</ul>

<p>Here are a few resolved issues that may help you get started:</p>

<ul>
<li><a href="https://github.com/kubernetes/helm/issues/1371">https://github.com/kubernetes/helm/issues/1371</a></li>
<li><a href="https://github.com/kubernetes/helm/issues/966">https://github.com/kubernetes/helm/issues/966</a></li>
</ul>

<p><strong>Q: Trying to use Helm, I get the error &ldquo;lookup XXXXX on 8.8.8.8:53: no such host&rdquo;</strong></p>

<pre><code>Error: Error forwarding ports: error upgrading connection: dial tcp: lookup kube-4gb-lon1-02 on 8.8.8.8:53: no such host
</code></pre>

<p>A: We have seen this issue with Ubuntu and Kubeadm in multi-node clusters. The
issue is that the nodes expect certain DNS records to be obtainable via global
DNS. Until this is resolved upstream, you can work around the issue as
follows. On each of the control plane nodes:</p>

<p>1) Add entries to <code>/etc/hosts</code>, mapping your hostnames to their public IPs
2) Install <code>dnsmasq</code> (e.g. <code>apt install -y dnsmasq</code>)
3) Remove the k8s api server container (kubelet will recreate it)
4) Then <code>systemctl restart docker</code> (or reboot the node) for it to pick up the /etc/resolv.conf changes</p>

<p>See this issue for more information: <a href="https://github.com/kubernetes/helm/issues/1455">https://github.com/kubernetes/helm/issues/1455</a></p>

<p><strong>Q: On GKE (Google Container Engine) I get &ldquo;No SSH tunnels currently open&rdquo;</strong></p>

<pre><code>Error: Error forwarding ports: error upgrading connection: No SSH tunnels currently open. Were the targets able to accept an ssh-key for user &quot;gke-[redacted]&quot;?
</code></pre>

<p>Another variation of the error message is:</p>

<pre><code>Unable to connect to the server: x509: certificate signed by unknown authority

</code></pre>

<p>A: The issue is that your local Kubernetes config file must have the correct credentials.</p>

<p>When you create a cluster on GKE, it will give you credentials, including SSL
certificates and certificate authorities. These need to be stored in a Kubernetes
config file (Default: <code>~/.kube/config</code> so that <code>kubectl</code> and <code>helm</code> can access
them.</p>

<p><strong>Q: When I run a Helm command, I get an error about the tunnel or proxy</strong></p>

<p>A: Helm uses the Kubernetes proxy service to connect to the Tiller server.
If the command <code>kubectl proxy</code> does not work for you, neither will Helm.
Typically, the error is related to a missing <code>socat</code> service.</p>

<p><strong>Q: Tiller crashes with a panic</strong></p>

<p>When I run a command on Helm, Tiller crashes with an error like this:</p>

<pre><code>Tiller is listening on :44134
Probes server is listening on :44135
Storage driver is ConfigMap
Cannot initialize Kubernetes connection: the server has asked for the client to provide credentials 2016-12-20 15:18:40.545739 I | storage.go:37: Getting release &quot;bailing-chinchilla&quot; (v1) from storage
panic: runtime error: invalid memory address or nil pointer dereference
[signal SIGSEGV: segmentation violation code=0x1 addr=0x0 pc=0x8053d5]

goroutine 77 [running]:
panic(0x1abbfc0, 0xc42000a040)
        /usr/local/go/src/runtime/panic.go:500 +0x1a1
k8s.io/helm/vendor/k8s.io/kubernetes/pkg/client/unversioned.(*ConfigMaps).Get(0xc4200c6200, 0xc420536100, 0x15, 0x1ca7431, 0x6, 0xc42016b6a0)
        /home/ubuntu/.go_workspace/src/k8s.io/helm/vendor/k8s.io/kubernetes/pkg/client/unversioned/configmap.go:58 +0x75
k8s.io/helm/pkg/storage/driver.(*ConfigMaps).Get(0xc4201d6190, 0xc420536100, 0x15, 0xc420536100, 0x15, 0xc4205360c0)
        /home/ubuntu/.go_workspace/src/k8s.io/helm/pkg/storage/driver/cfgmaps.go:69 +0x62
k8s.io/helm/pkg/storage.(*Storage).Get(0xc4201d61a0, 0xc4205360c0, 0x12, 0xc400000001, 0x12, 0x0, 0xc420200070)
        /home/ubuntu/.go_workspace/src/k8s.io/helm/pkg/storage/storage.go:38 +0x160
k8s.io/helm/pkg/tiller.(*ReleaseServer).uniqName(0xc42002a000, 0x0, 0x0, 0xc42016b800, 0xd66a13, 0xc42055a040, 0xc420558050, 0xc420122001)
        /home/ubuntu/.go_workspace/src/k8s.io/helm/pkg/tiller/release_server.go:577 +0xd7
k8s.io/helm/pkg/tiller.(*ReleaseServer).prepareRelease(0xc42002a000, 0xc42027c1e0, 0xc42002a001, 0xc42016bad0, 0xc42016ba08)
        /home/ubuntu/.go_workspace/src/k8s.io/helm/pkg/tiller/release_server.go:630 +0x71
k8s.io/helm/pkg/tiller.(*ReleaseServer).InstallRelease(0xc42002a000, 0x7f284c434068, 0xc420250c00, 0xc42027c1e0, 0x0, 0x31a9, 0x31a9)
        /home/ubuntu/.go_workspace/src/k8s.io/helm/pkg/tiller/release_server.go:604 +0x78
k8s.io/helm/pkg/proto/hapi/services._ReleaseService_InstallRelease_Handler(0x1c51f80, 0xc42002a000, 0x7f284c434068, 0xc420250c00, 0xc42027c190, 0x0, 0x0, 0x0, 0x0, 0x0)
        /home/ubuntu/.go_workspace/src/k8s.io/helm/pkg/proto/hapi/services/tiller.pb.go:747 +0x27d
k8s.io/helm/vendor/google.golang.org/grpc.(*Server).processUnaryRPC(0xc4202f3ea0, 0x28610a0, 0xc420078000, 0xc420264690, 0xc420166150, 0x288cbe8, 0xc420250bd0, 0x0, 0x0)
        /home/ubuntu/.go_workspace/src/k8s.io/helm/vendor/google.golang.org/grpc/server.go:608 +0xc50
k8s.io/helm/vendor/google.golang.org/grpc.(*Server).handleStream(0xc4202f3ea0, 0x28610a0, 0xc420078000, 0xc420264690, 0xc420250bd0)
        /home/ubuntu/.go_workspace/src/k8s.io/helm/vendor/google.golang.org/grpc/server.go:766 +0x6b0
k8s.io/helm/vendor/google.golang.org/grpc.(*Server).serveStreams.func1.1(0xc420124710, 0xc4202f3ea0, 0x28610a0, 0xc420078000, 0xc420264690)
        /home/ubuntu/.go_workspace/src/k8s.io/helm/vendor/google.golang.org/grpc/server.go:419 +0xab
created by k8s.io/helm/vendor/google.golang.org/grpc.(*Server).serveStreams.func1
        /home/ubuntu/.go_workspace/src/k8s.io/helm/vendor/google.golang.org/grpc/server.go:420 +0xa3
</code></pre>

<p>A: Check your security settings for Kubernetes.</p>

<p>A panic in Tiller is almost always the result of a failure to negotiate with the
Kubernetes API server (at which point Tiller can no longer do anything useful, so
it panics and exits).</p>

<p>Often, this is a result of authentication failing because the Pod in which Tiller
is running does not have the right token.</p>

<p>To fix this, you will need to change your Kubernetes configuration. Make sure
that <code>--service-account-private-key-file</code> from <code>controller-manager</code> and
<code>--service-account-key-file</code> from apiserver point to the <em>same</em> x509 RSA key.</p>

<h2 id="upgrading">Upgrading</h2>

<p>My Helm used to work, then I upgrade. Now it is broken.</p>

<p><strong>Q: After upgrade, I get the error &ldquo;Client version is incompatible&rdquo;. What&rsquo;s wrong?</strong></p>

<p>Tiller and Helm have to negotiate a common version to make sure that they can safely
communicate without breaking API assumptions. That error means that the version
difference is too great to safely continue. Typically, you need to upgrade
Tiller manually for this.</p>

<p>The <a href="./#install">Installation Guide</a> has definitive information about safely
upgrading Helm and Tiller.</p>

<p>The rules for version numbers are as follows:</p>

<ul>
<li>Pre-release versions are incompatible with everything else. <code>Alpha.1</code> is incompatible with <code>Alpha.2</code>.</li>
<li>Patch revisions <em>are compatible</em>: 1.2.3 is compatible with 1.2.4</li>
<li>Minor revisions <em>are not compatible</em>: 1.2.0 is not compatible with 1.3.0,
though we may relax this constraint in the future.</li>
<li>Major revisions <em>are not compatible</em>: 1.0.0 is not compatible with 2.0.0.</li>
</ul>

<h2 id="uninstalling">Uninstalling</h2>

<p>I am trying to remove stuff.</p>

<p><strong>Q: When I delete the Tiller deployment, how come all the releases are still there?</strong></p>

<p>Releases are stored in ConfigMaps inside of the <code>kube-system</code> namespace. You will
have to manually delete them to get rid of the record.</p>

<p><strong>Q: I want to delete my local Helm. Where are all its files?</strong></p>

<p>Along with the <code>helm</code> binary, Helm stores some files in <code>$HELM_HOME</code>, which is
located by default in <code>~/.helm</code>.</p>

<h1 id="using-helm">Using Helm</h1>

<p>This guide explains the basics of using Helm (and Tiller) to manage
packages on your Kubernetes cluster. It assumes that you have already
<a href="./#install">installed</a> the Helm client and the Tiller server (typically by <code>helm
init</code>).</p>

<p>If you are simply interested in running a few quick commands, you may
wish to begin with the <a href="./#quickstart">Quickstart Guide</a>. This chapter
covers the particulars of Helm commands, and explains how to use Helm.</p>

<h2 id="three-big-concepts">Three Big Concepts</h2>

<p>A <em>Chart</em> is a Helm package. It contains all of the resource definitions
necessary to run an application, tool, or service inside of a Kubernetes
cluster. Think of it like the Kubernetes equivalent of a Homebrew formula,
an Apt dpkg, or a Yum RPM file.</p>

<p>A <em>Repository</em> is the place where charts can be collected and shared.
It&rsquo;s like Perl&rsquo;s <a href="http://www.cpan.org">CPAN archive</a> or the
<a href="https://admin.fedoraproject.org/pkgdb/">Fedora Package Database</a>, but for
Kubernetes packages.</p>

<p>A <em>Release</em> is an instance of a chart running in a Kubernetes cluster.
One chart can often be installed many times into the same cluster. And
each time it is installed, a new <em>release</em> is created. Consider a MySQL
chart. If you want two databases running in your cluster, you can
install that chart twice. Each one will have its own <em>release</em>, which
will in turn have its own <em>release name</em>.</p>

<p>With these concepts in mind, we can now explain Helm like this:</p>

<p>Helm installs <em>charts</em> into Kubernetes, creating a new <em>release</em> for
each installation. And to find new charts, you can search Helm chart
<em>repositories</em>.</p>

<h2 id="helm-search-finding-charts">&lsquo;helm search&rsquo;: Finding Charts</h2>

<p>When you first install Helm, it is preconfigured to talk to the official
Kubernetes charts repository. This repository contains a number of
carefully curated and maintained charts. This chart repository is named
<code>stable</code> by default.</p>

<p>You can see which charts are available by running <code>helm search</code>:</p>

<pre><code>$ helm search
NAME                 	VERSION 	DESCRIPTION
stable/drupal   	0.3.2   	One of the most versatile open source content m...
stable/jenkins  	0.1.0   	A Jenkins Helm chart for Kubernetes.
stable/mariadb  	0.5.1   	Chart for MariaDB
stable/mysql    	0.1.0   	Chart for MySQL
...
</code></pre>

<p>With no filter, <code>helm search</code> shows you all of the available charts. You
can narrow down your results by searching with a filter:</p>

<pre><code>$ helm search mysql
NAME               	VERSION	DESCRIPTION
stable/mysql  	0.1.0  	Chart for MySQL
stable/mariadb	0.5.1  	Chart for MariaDB
</code></pre>

<p>Now you will only see the results that match your filter.</p>

<p>Why is
<code>mariadb</code> in the list? Because its package description relates it to
MySQL. We can use <code>helm inspect chart</code> to see this:</p>

<pre><code>$ helm inspect stable/mariadb
Fetched stable/mariadb to mariadb-0.5.1.tgz
description: Chart for MariaDB
engine: gotpl
home: https://mariadb.org
keywords:
- mariadb
- mysql
- database
- sql
...
</code></pre>

<p>Search is a good way to find available packages. Once you have found a
package you want to install, you can use <code>helm install</code> to install it.</p>

<h2 id="helm-install-installing-a-package">&lsquo;helm install&rsquo;: Installing a Package</h2>

<p>To install a new package, use the <code>helm install</code> command. At its
simplest, it takes only one argument: The name of the chart.</p>

<pre><code>$ helm install stable/mariadb
Fetched stable/mariadb-0.3.0 to /Users/mattbutcher/Code/Go/src/k8s.io/helm/mariadb-0.3.0.tgz
happy-panda
Last Deployed: Wed Sep 28 12:32:28 2016
Namespace: default
Status: DEPLOYED

Resources:
==&gt; extensions/Deployment
NAME                     DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE
happy-panda-mariadb   1         0         0            0           1s

==&gt; v1/Secret
NAME                     TYPE      DATA      AGE
happy-panda-mariadb   Opaque    2         1s

==&gt; v1/Service
NAME                     CLUSTER-IP   EXTERNAL-IP   PORT(S)    AGE
happy-panda-mariadb   10.0.0.70    &lt;none&gt;        3306/TCP   1s


Notes:
MariaDB can be accessed via port 3306 on the following DNS name from within your cluster:
happy-panda-mariadb.default.svc.cluster.local

To connect to your database run the following command:

   kubectl run happy-panda-mariadb-client --rm --tty -i --image bitnami/mariadb --command -- mysql -h happy-panda-mariadb
</code></pre>

<p>Now the <code>mariadb</code> chart is installed. Note that installing a chart
creates a new <em>release</em> object. The release above is named
<code>happy-panda</code>. (If you want to use your own release name, simply use the
<code>--name</code> flag on <code>helm install</code>.)</p>

<p>During installation, the <code>helm</code> client will print useful information
about which resources were created, what the state of the release is,
and also whether there are additional configuration steps you can or
should take.</p>

<p>Helm does not wait until all of the resources are running before it
exits. Many charts require Docker images that are over 600M in size, and
may take a long time to install into the cluster.</p>

<p>To keep track of a release&rsquo;s state, or to re-read configuration
information, you can use <code>helm status</code>:</p>

<pre><code>$ helm status happy-panda
Last Deployed: Wed Sep 28 12:32:28 2016
Namespace: default
Status: DEPLOYED

Resources:
==&gt; v1/Service
NAME                     CLUSTER-IP   EXTERNAL-IP   PORT(S)    AGE
happy-panda-mariadb   10.0.0.70    &lt;none&gt;        3306/TCP   4m

==&gt; extensions/Deployment
NAME                     DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE
happy-panda-mariadb   1         1         1            1           4m

==&gt; v1/Secret
NAME                     TYPE      DATA      AGE
happy-panda-mariadb   Opaque    2         4m


Notes:
MariaDB can be accessed via port 3306 on the following DNS name from within your cluster:
happy-panda-mariadb.default.svc.cluster.local

To connect to your database run the following command:

   kubectl run happy-panda-mariadb-client --rm --tty -i --image bitnami/mariadb --command -- mysql -h happy-panda-mariadb
</code></pre>

<p>The above shows the current state of your release.</p>

<h3 id="customizing-the-chart-before-installing">Customizing the Chart Before Installing</h3>

<p>Installing the way we have here will only use the default configuration
options for this chart. Many times, you will want to customize the chart
to use your preferred configuration.</p>

<p>To see what options are configurable on a chart, use <code>helm inspect
values</code>:</p>

<pre><code class="language-console">helm inspect values stable/mariadb
Fetched stable/mariadb-0.3.0.tgz to /Users/mattbutcher/Code/Go/src/k8s.io/helm/mariadb-0.3.0.tgz
## Bitnami MariaDB image version
## ref: https://hub.docker.com/r/bitnami/mariadb/tags/
##
## Default: none
imageTag: 10.1.14-r3

## Specify a imagePullPolicy
## Default to 'Always' if imageTag is 'latest', else set to 'IfNotPresent'
## ref: http://kubernetes.io/docs/user-guide/images/#pre-pulling-images
##
# imagePullPolicy:

## Specify password for root user
## ref: https://github.com/bitnami/bitnami-docker-mariadb/blob/master/README.md#setting-the-root-password-on-first-run
##
# mariadbRootPassword:

## Create a database user
## ref: https://github.com/bitnami/bitnami-docker-mariadb/blob/master/README.md#creating-a-database-user-on-first-run
##
# mariadbUser:
# mariadbPassword:

## Create a database
## ref: https://github.com/bitnami/bitnami-docker-mariadb/blob/master/README.md#creating-a-database-on-first-run
##
# mariadbDatabase:
</code></pre>

<p>You can then override any of these settings in a YAML formatted file,
and then pass that file during installation.</p>

<pre><code class="language-console">$ echo '{mariadbUser: user0, mariadbDatabase: user0db}' &gt; config.yaml
$ helm install -f config.yaml stable/mariadb
</code></pre>

<p>The above will create a default MariaDB user with the name <code>user0</code>, and
grant this user access to a newly created <code>user0db</code> database, but will
accept all the rest of the defaults for that chart.</p>

<p>There are two ways to pass configuration data during install:</p>

<ul>
<li><code>--values</code> (or <code>-f</code>): Specify a YAML file with overrides. This can be specified multiple times
and the rightmost file will take precedence</li>
<li><code>--set</code>: Specify overrides on the command line.</li>
</ul>

<p>If both are used, <code>--set</code> values are merged into <code>--values</code> with higher precedence.
Overrides specified with <code>--set</code> are persisted in a configmap. Values that have been
<code>--set</code> can be viewed for a given release with <code>helm get values &lt;release-name&gt;</code>.
Values that have been <code>--set</code> can be cleared by running <code>helm upgrade</code> with <code>--reset-values</code>
specified.</p>

<h4 id="the-format-and-limitations-of-set">The Format and Limitations of <code>--set</code></h4>

<p>The <code>--set</code> option takes zero or more name/value pairs. At its simplest, it is
used like this: <code>--set name=value</code>. The YAML equivalent of that is:</p>

<pre><code class="language-yaml">name: value
</code></pre>

<p>Multiple values are separated by <code>,</code> characters. So <code>--set a=b,c=d</code> becomes:</p>

<pre><code class="language-yaml">a: b
c: d
</code></pre>

<p>More complex expressions are supported. For example, <code>--set outer.inner=value</code> is
translated into this:</p>

<pre><code class="language-yaml">outer:
  inner: value
</code></pre>

<p>Lists can be expressed by enclosing values in <code>{</code> and <code>}</code>. For example,
<code>--set name={a, b, c}</code> translates to:</p>

<pre><code class="language-yaml">name:
  - a
  - b
  - c
</code></pre>

<p>As of Helm 2.5.0, it is possible to access list items using an array index syntax.
For example, <code>--set servers[0].port=80</code> becomes:</p>

<pre><code class="language-yaml">servers:
  - port: 80
</code></pre>

<p>Multiple values can be set this way. The line <code>--set servers[0].port=80,servers[0].host=example</code> becomes:</p>

<pre><code class="language-yaml">servers:
  - port: 80
    host: example
</code></pre>

<p>Sometimes you need to use special characters in your <code>--set</code> lines. You can use
a backslash to escape the characters; <code>--set name=value1\,value2</code> will become:</p>

<pre><code class="language-yaml">name: &quot;value1,value2&quot;
</code></pre>

<p>Similarly, you can escape dot sequences as well, which may come in handy when charts use the
<code>toYaml</code> function to parse annotations, labels and node selectors. The syntax for
<code>--set nodeSelector.&quot;kubernetes\.io/role&quot;=master</code> becomes:</p>

<pre><code class="language-yaml">nodeSelector:
  kubernetes.io/role: master
</code></pre>

<p>Deeply nested data structures can be difficult to express using <code>--set</code>. Chart
designers are encouraged to consider the <code>--set</code> usage when designing the format
of a <code>values.yaml</code> file.</p>

<h3 id="more-installation-methods">More Installation Methods</h3>

<p>The <code>helm install</code> command can install from several sources:</p>

<ul>
<li>A chart repository (as we&rsquo;ve seen above)</li>
<li>A local chart archive (<code>helm install foo-0.1.1.tgz</code>)</li>
<li>An unpacked chart directory (<code>helm install path/to/foo</code>)</li>
<li>A full URL (<code>helm install https://example.com/charts/foo-1.2.3.tgz</code>)</li>
</ul>

<h2 id="helm-upgrade-and-helm-rollback-upgrading-a-release-and-recovering-on-failure">&lsquo;helm upgrade&rsquo; and &lsquo;helm rollback&rsquo;: Upgrading a Release, and Recovering on Failure</h2>

<p>When a new version of a chart is released, or when you want to change
the configuration of your release, you can use the <code>helm upgrade</code>
command.</p>

<p>An upgrade takes an existing release and upgrades it according to the
information you provide. Because Kubernetes charts can be large and
complex, Helm tries to perform the least invasive upgrade. It will only
update things that have changed since the last release.</p>

<pre><code class="language-console">$ helm upgrade -f panda.yaml happy-panda stable/mariadb
Fetched stable/mariadb-0.3.0.tgz to /Users/mattbutcher/Code/Go/src/k8s.io/helm/mariadb-0.3.0.tgz
happy-panda has been upgraded. Happy Helming!
Last Deployed: Wed Sep 28 12:47:54 2016
Namespace: default
Status: DEPLOYED
...
</code></pre>

<p>In the above case, the <code>happy-panda</code> release is upgraded with the same
chart, but with a new YAML file:</p>

<pre><code class="language-yaml">mariadbUser: user1
</code></pre>

<p>We can use <code>helm get values</code> to see whether that new setting took
effect.</p>

<pre><code class="language-console">$ helm get values happy-panda
mariadbUser: user1
</code></pre>

<p>The <code>helm get</code> command is a useful tool for looking at a release in the
cluster. And as we can see above, it shows that our new values from
<code>panda.yaml</code> were deployed to the cluster.</p>

<p>Now, if something does not go as planned during a release, it is easy to
roll back to a previous release using <code>helm rollback [RELEASE] [REVISION]</code>.</p>

<pre><code class="language-console">$ helm rollback happy-panda 1
</code></pre>

<p>The above rolls back our happy-panda to its very first release version.
A release version is an incremental revision. Every time an install,
upgrade, or rollback happens, the revision number is incremented by 1.
The first revision number is always 1. And we can use <code>helm history [RELEASE]</code>
to see revision numbers for a certain release.</p>

<h2 id="helpful-options-for-install-upgrade-rollback">Helpful Options for Install/Upgrade/Rollback</h2>

<p>There are several other helpful options you can specify for customizing the
behavior of Helm during an install/upgrade/rollback. Please note that this
is not a full list of cli flags. To see a description of all flags, just run
<code>helm &lt;command&gt; --help</code>.</p>

<ul>
<li><code>--timeout</code>: A value in seconds to wait for Kubernetes commands to complete
This defaults to 300 (5 minutes)</li>
<li><code>--wait</code>: Waits until all Pods are in a ready state, PVCs are bound, Deployments
have minimum (<code>Desired</code> minus <code>maxUnavailable</code>) Pods in ready state and
Services have an IP address (and Ingress if a <code>LoadBalancer</code>) before
marking the release as successful. It will wait for as long as the
<code>--timeout</code> value. If timeout is reached, the release will be marked as
<code>FAILED</code>. Note: In scenario where Deployment has <code>replicas</code> set to 1 and
<code>maxUnavailable</code> is not set to 0 as part of rolling update strategy,
<code>--wait</code> will return as ready as it has satisfied the minimum Pod in ready condition.</li>
<li><code>--no-hooks</code>: This skips running hooks for the command</li>
<li><code>--recreate-pods</code> (only available for <code>upgrade</code> and <code>rollback</code>): This flag
will cause all pods to be recreated (with the exception of pods belonging to
deployments)</li>
</ul>

<h2 id="helm-delete-deleting-a-release">&lsquo;helm delete&rsquo;: Deleting a Release</h2>

<p>When it is time to uninstall or delete a release from the cluster, use
the <code>helm delete</code> command:</p>

<pre><code>$ helm delete happy-panda
</code></pre>

<p>This will remove the release from the cluster. You can see all of your
currently deployed releases with the <code>helm list</code> command:</p>

<pre><code>$ helm list
NAME           	VERSION	UPDATED                        	STATUS         	CHART
inky-cat       	1      	Wed Sep 28 12:59:46 2016       	DEPLOYED       	alpine-0.1.0
</code></pre>

<p>From the output above, we can see that the <code>happy-panda</code> release was
deleted.</p>

<p>However, Helm always keeps records of what releases happened. Need to
see the deleted releases? <code>helm list --deleted</code> shows those, and <code>helm
list --all</code> shows all of the releases (deleted and currently deployed,
as well as releases that failed):</p>

<pre><code class="language-console">  helm list --all
NAME           	VERSION	UPDATED                        	STATUS         	CHART
happy-panda   	2      	Wed Sep 28 12:47:54 2016       	DELETED        	mariadb-0.3.0
inky-cat       	1      	Wed Sep 28 12:59:46 2016       	DEPLOYED       	alpine-0.1.0
kindred-angelf 	2      	Tue Sep 27 16:16:10 2016       	DELETED        	alpine-0.1.0
</code></pre>

<p>Because Helm keeps records of deleted releases, a release name cannot be
re-used. (If you <em>really</em> need to re-use a release name, you can use the
<code>--replace</code> flag, but it will simply re-use the existing release and
replace its resources.)</p>

<p>Note that because releases are preserved in this way, you can rollback a
deleted resource, and have it re-activate.</p>

<h2 id="helm-repo-working-with-repositories">&lsquo;helm repo&rsquo;: Working with Repositories</h2>

<p>So far, we&rsquo;ve been installing charts only from the <code>stable</code> repository.
But you can configure <code>helm</code> to use other repositories. Helm provides
several repository tools under the <code>helm repo</code> command.</p>

<p>You can see which repositories are configured using <code>helm repo list</code>:</p>

<pre><code class="language-console">$ helm repo list
NAME           	URL
stable         	https://kubernetes-charts.storage.googleapis.com
local          	http://localhost:8879/charts
mumoshu        	https://mumoshu.github.io/charts
</code></pre>

<p>And new repositories can be added with <code>helm repo add</code>:</p>

<pre><code class="language-console">$ helm repo add dev https://example.com/dev-charts
</code></pre>

<p>Because chart repositories change frequently, at any point you can make
sure your Helm client is up to date by running <code>helm repo update</code>.</p>

<h2 id="creating-your-own-charts">Creating Your Own Charts</h2>

<p>The <a href="./#charts">Chart Development Guide</a> explains how to develop your own
charts. But you can get started quickly by using the <code>helm create</code>
command:</p>

<pre><code class="language-console">$ helm create deis-workflow
Creating deis-workflow
</code></pre>

<p>Now there is a chart in <code>./deis-workflow</code>. You can edit it and create
your own templates.</p>

<p>As you edit your chart, you can validate that it is well-formatted by
running <code>helm lint</code>.</p>

<p>When it&rsquo;s time to package the chart up for distribution, you can run the
<code>helm package</code> command:</p>

<pre><code class="language-console">$ helm package deis-workflow
deis-workflow-0.1.0.tgz
</code></pre>

<p>And that chart can now easily be installed by <code>helm install</code>:</p>

<pre><code class="language-console">$ helm install ./deis-workflow-0.1.0.tgz
...
</code></pre>

<p>Charts that are archived can be loaded into chart repositories. See the
documentation for your chart repository server to learn how to upload.</p>

<p>Note: The <code>stable</code> repository is managed on the <a href="https://github.com/kubernetes/charts">Kubernetes Charts
GitHub repository</a>. That project
accepts chart source code, and (after audit) packages those for you.</p>

<h2 id="tiller-namespaces-and-rbac">Tiller, Namespaces and RBAC</h2>

<p>In some cases you may wish to scope Tiller or deploy multiple Tillers to a single cluster. Here are some best practices when operating in those circumstances.</p>

<ol>
<li>Tiller can be <a href="./#install">installed</a> into any namespace. By default, it is installed into kube-system. You can run multiple Tillers provided they each run in their own namespace.</li>
<li>Limiting Tiller to only be able to install into specific namespaces and/or resource types is controlled by Kubernetes <a href="./#https://kubernetes.io/docs/admin/authorization/rbac/">RBAC</a> roles and rolebindings. You can add a service account to Tiller when configuring Helm via <code>helm init --service-account &lt;NAME&gt;</code>. You can find more information about that <a href="rbac">here</a>.</li>
<li>Release names are unique PER TILLER INSTANCE.</li>
<li>Charts should only contain resources that exist in a single namespace.</li>
<li>It is not recommended to have multiple Tillers configured to manage resources in the same namespace.</li>
</ol>

<h2 id="conclusion-1">Conclusion</h2>

<p>This chapter has covered the basic usage patterns of the <code>helm</code> client,
including searching, installation, upgrading, and deleting. It has also
covered useful utility commands like <code>helm status</code>, <code>helm get</code>, and
<code>helm repo</code>.</p>

<p>For more information on these commands, take a look at Helm&rsquo;s built-in
help: <code>helm help</code>.</p>

<p>In the next chapter, we look at the process of developing charts.</p>

<h1 id="the-helm-plugins-guide">The Helm Plugins Guide</h1>

<p>Helm 2.1.0 introduced the concept of a client-side Helm <em>plugin</em>. A plugin is a
tool that can be accessed through the <code>helm</code> CLI, but which is not part of the
built-in Helm codebase.</p>

<p>Existing plugins can be found on <a href="related.md#helm-plugins">related</a> section or by searching <a href="https://github.com/search?q=topic%3Ahelm-plugin&amp;type=Repositories">Github</a>.</p>

<p>This guide explains how to use and create plugins.</p>

<h2 id="an-overview">An Overview</h2>

<p>Helm plugins are add-on tools that integrate seamlessly with Helm. They provide
a way to extend the core feature set of Helm, but without requiring every new
feature to be written in Go and added to the core tool.</p>

<p>Helm plugins have the following features:</p>

<ul>
<li>They can be added and removed from a Helm installation without impacting the
core Helm tool.</li>
<li>They can be written in any programming language.</li>
<li>They integrate with Helm, and will show up in <code>helm help</code> and other places.</li>
</ul>

<p>Helm plugins live in <code>$(helm home)/plugins</code>.</p>

<p>The Helm plugin model is partially modeled on Git&rsquo;s plugin model. To that end,
you may sometimes hear <code>helm</code> referred to as the <em>porcelain</em> layer, with
plugins being the <em>plumbing</em>. This is a shorthand way of suggesting that
Helm provides the user experience and top level processing logic, while the
plugins do the &ldquo;detail work&rdquo; of performing a desired action.</p>

<h2 id="installing-a-plugin">Installing a Plugin</h2>

<p>Plugins are installed using the <code>$ helm plugin install &lt;path|url&gt;</code> command. You can pass in a path to a plugin on your local file system or a url of a remote VCS repo. The <code>helm plugin install</code> command clones or copies the plugin at the path/url given into <code>$ (helm home)/plugins</code></p>

<pre><code class="language-console">$ helm plugin install https://github.com/technosophos/helm-template
</code></pre>

<p>If you have a plugin tar distribution, simply untar the plugin into the
<code>$(helm home)/plugins</code> directory.</p>

<p>You can also install tarball plugins directly from url by issuing <code>helm plugin install http://domain/path/to/plugin.tar.gz</code></p>

<h2 id="building-plugins">Building Plugins</h2>

<p>In many ways, a plugin is similar to a chart. Each plugin has a top-level
directory, and then a <code>plugin.yaml</code> file.</p>

<pre><code>$(helm home)/plugins/
  |- keybase/
      |
      |- plugin.yaml
      |- keybase.sh

</code></pre>

<p>In the example above, the <code>keybase</code> plugin is contained inside of a directory
named <code>keybase</code>. It has two files: <code>plugin.yaml</code> (required) and an executable
script, <code>keybase.sh</code> (optional).</p>

<p>The core of a plugin is a simple YAML file named <code>plugin.yaml</code>.
Here is a plugin YAML for a plugin that adds support for Keybase operations:</p>

<pre><code>name: &quot;keybase&quot;
version: &quot;0.1.0&quot;
usage: &quot;Integrate Keybase.io tools with Helm&quot;
description: |-
  This plugin provides Keybase services to Helm.
ignoreFlags: false
useTunnel: false
command: &quot;$HELM_PLUGIN_DIR/keybase.sh&quot;
</code></pre>

<p>The <code>name</code> is the name of the plugin. When Helm executes it plugin, this is the
name it will use (e.g. <code>helm NAME</code> will invoke this plugin).</p>

<p><em><code>name</code> should match the directory name.</em> In our example above, that means the
plugin with <code>name: keybase</code> should be contained in a directory named <code>keybase</code>.</p>

<p>Restrictions on <code>name</code>:</p>

<ul>
<li><code>name</code> cannot duplicate one of the existing <code>helm</code> top-level commands.</li>
<li><code>name</code> must be restricted to the characters ASCII a-z, A-Z, 0-9, <code>_</code> and <code>-</code>.</li>
</ul>

<p><code>version</code> is the SemVer 2 version of the plugin.
<code>usage</code> and <code>description</code> are both used to generate the help text of a command.</p>

<p>The <code>ignoreFlags</code> switch tells Helm to <em>not</em> pass flags to the plugin. So if a
plugin is called with <code>helm myplugin --foo</code> and <code>ignoreFlags: true</code>, then <code>--foo</code>
is silently discarded.</p>

<p>The <code>useTunnel</code> switch indicates that the plugin needs a tunnel to Tiller. This
should be set to <code>true</code> <em>anytime a plugin talks to Tiller</em>. It will cause Helm
to open a tunnel, and then set <code>$TILLER_HOST</code> to the right local address for that
tunnel. But don&rsquo;t worry: if Helm detects that a tunnel is not necessary because
Tiller is running locally, it will not create the tunnel.</p>

<p>Finally, and most importantly, <code>command</code> is the command that this plugin will
execute when it is called. Environment variables are interpolated before the plugin
is executed. The pattern above illustrates the preferred way to indicate where
the plugin program lives.</p>

<p>There are some strategies for working with plugin commands:</p>

<ul>
<li>If a plugin includes an executable, the executable for a <code>command:</code> should be
packaged in the plugin directory.</li>
<li>The <code>command:</code> line will have any environment variables expanded before
execution. <code>$HELM_PLUGIN_DIR</code> will point to the plugin directory.</li>
<li>The command itself is not executed in a shell. So you can&rsquo;t oneline a shell script.</li>
<li>Helm injects lots of configuration into environment variables. Take a look at
the environment to see what information is available.</li>
<li>Helm makes no assumptions about the language of the plugin. You can write it
in whatever you prefer.</li>
<li>Commands are responsible for implementing specific help text for <code>-h</code> and <code>--help</code>.
Helm will use <code>usage</code> and <code>description</code> for <code>helm help</code> and <code>helm help myplugin</code>,
but will not handle <code>helm myplugin --help</code>.</li>
</ul>

<h2 id="downloader-plugins">Downloader Plugins</h2>

<p>By default, Helm is able to fetch Charts using HTTP/S. As of Helm 2.4.0, plugins
can have a special capability to download Charts from arbitrary sources.</p>

<p>Plugins shall declare this special capability in the <code>plugin.yaml</code> file (top level):</p>

<pre><code>downloaders:
- command: &quot;bin/mydownloader&quot;
  protocols:
  - &quot;myprotocol&quot;
  - &quot;myprotocols&quot;
</code></pre>

<p>If such plugin is installed, Helm can interact with the repository using the specified
protocol scheme by invoking the <code>command</code>. The special repository shall be added
similarily to the regular ones: <code>helm repo add favorite myprotocol://example.com/</code>
The rules for the special repos are the same to the regular ones: Helm must be able
to download the <code>index.yaml</code> file in order to discover and cache the list of
available Charts.</p>

<p>The defined command will be invoked with the following scheme:
<code>command certFile keyFile caFile full-URL</code>. The SSL credentials are coming from the
repo definition, stored in <code>$HELM_HOME/repository/repositories.yaml</code>. Downloader
plugin is expected to dump the raw content to stdout and report errors on stderr.</p>

<h2 id="environment-variables">Environment Variables</h2>

<p>When Helm executes a plugin, it passes the outer environment to the plugin, and
also injects some additional environment variables.</p>

<p>Variables like <code>KUBECONFIG</code> are set for the plugin if they are set in the
outer environment.</p>

<p>The following variables are guaranteed to be set:</p>

<ul>
<li><code>HELM_PLUGIN</code>: The path to the plugins directory</li>
<li><code>HELM_PLUGIN_NAME</code>: The name of the plugin, as invoked by <code>helm</code>. So
<code>helm myplug</code> will have the short name <code>myplug</code>.</li>
<li><code>HELM_PLUGIN_DIR</code>: The directory that contains the plugin.</li>
<li><code>HELM_BIN</code>: The path to the <code>helm</code> command (as executed by the user).</li>
<li><code>HELM_HOME</code>: The path to the Helm home.</li>
<li><code>HELM_PATH_*</code>: Paths to important Helm files and directories are stored in
environment variables prefixed by <code>HELM_PATH</code>.</li>
<li><code>TILLER_HOST</code>: The <code>domain:port</code> to Tiller. If a tunnel is created, this
will point to the local endpoint for the tunnel. Otherwise, it will point
to <code>$HELM_HOST</code>, <code>--host</code>, or the default host (according to Helm&rsquo;s rules of
precedence).</li>
</ul>

<p>While <code>HELM_HOST</code> <em>may</em> be set, there is no guarantee that it will point to the
correct Tiller instance. This is done to allow plugin developer to access
<code>HELM_HOST</code> in its raw state when the plugin itself needs to manually configure
a connection.</p>

<h2 id="a-note-on-usetunnel">A Note on <code>useTunnel</code></h2>

<p>If a plugin specifies <code>useTunnel: true</code>, Helm will do the following (in order):</p>

<ol>
<li>Parse global flags and the environment</li>
<li>Create the tunnel</li>
<li>Set <code>TILLER_HOST</code></li>
<li>Execute the plugin</li>
<li>Close the tunnel</li>
</ol>

<p>The tunnel is removed as soon as the <code>command</code> returns. So, for example, a
command cannot background a process and assume that that process will be able
to use the tunnel.</p>

<h2 id="a-note-on-flag-parsing">A Note on Flag Parsing</h2>

<p>When executing a plugin, Helm will parse global flags for its own use. Some of
these flags are <em>not</em> passed on to the plugin.</p>

<ul>
<li><code>--debug</code>: If this is specified, <code>$HELM_DEBUG</code> is set to <code>1</code></li>
<li><code>--home</code>: This is converted to <code>$HELM_HOME</code></li>
<li><code>--host</code>: This is converted to <code>$HELM_HOST</code></li>
<li><code>--kube-context</code>: This is simply dropped. If your plugin uses <code>useTunnel</code>, this
is used to set up the tunnel for you.</li>
</ul>

<p>Plugins <em>should</em> display help text and then exit for <code>-h</code> and <code>--help</code>. In all
other cases, plugins may use flags as appropriate.</p>

<h1 id="role-based-access-control">Role-based Access Control</h1>

<p>In Kubernetes, granting a role to an application-specific service account is a best practice to ensure that your application is operating in the scope that you have specified. Read more about service account permissions <a href="https://kubernetes.io/docs/admin/authorization/rbac/#service-account-permissions">in the official Kubernetes docs</a>.</p>

<p>Bitnami also has a fantastic guide for <a href="https://docs.bitnami.com/kubernetes/how-to/configure-rbac-in-your-kubernetes-cluster/">configuring RBAC in your cluster</a> that takes you through RBAC basics.</p>

<p>This guide is for users who want to restrict tiller&rsquo;s capabilities to install resources to certain namespaces, or to grant a helm client running access to a tiller instance.</p>

<h2 id="tiller-and-role-based-access-control">Tiller and Role-based Access Control</h2>

<p>You can add a service account to Tiller using the <code>--service-account &lt;NAME&gt;</code> flag while you&rsquo;re configuring helm. As a prerequisite, you&rsquo;ll have to create a role binding which specifies a <a href="https://kubernetes.io/docs/admin/authorization/rbac/#role-and-clusterrole">role</a> and a <a href="https://kubernetes.io/docs/tasks/configure-pod-container/configure-service-account/">service account</a> name that have been set up in advance.</p>

<p>Once you have satisfied the pre-requisite and have a service account with the correct permissions, you&rsquo;ll run a command like this: <code>helm init --service-account &lt;NAME&gt;</code></p>

<h3 id="example-service-account-with-cluster-admin-role">Example: Service account with cluster-admin role</h3>

<pre><code class="language-console">$ kubectl create serviceaccount tiller --namespace kube-system
serviceaccount &quot;tiller&quot; created
</code></pre>

<p>In <code>rbac-config.yaml</code>:</p>

<pre><code class="language-yaml">apiVersion: v1
kind: ServiceAccount
metadata:
  name: tiller
  namespace: kube-system
---
apiVersion: rbac.authorization.k8s.io/v1beta1
kind: ClusterRoleBinding
metadata:
  name: tiller
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: cluster-admin
subjects:
  - kind: ServiceAccount
    name: tiller
    namespace: kube-system
</code></pre>

<p><em>Note: The cluster-admin role is created by default in a Kubernetes cluster, so you don&rsquo;t have to define it explicitly.</em></p>

<pre><code class="language-console">$ kubectl create -f rbac-config.yaml
serviceaccount &quot;tiller&quot; created
clusterrolebinding &quot;tiller&quot; created
$ helm init --service-account tiller
</code></pre>

<h3 id="example-deploy-tiller-in-a-namespace-restricted-to-deploying-resources-only-in-that-namespace">Example: Deploy tiller in a namespace, restricted to deploying resources only in that namespace</h3>

<p>In the example above, we gave Tiller admin access to the entire cluster. You are not at all required to give Tiller cluster-admin access for it to work. Instead of specifying a ClusterRole or a ClusterRoleBinding, you can specify a Role and RoleBinding to limit Tiller&rsquo;s scope to a particular namespace.</p>

<pre><code class="language-console">$ kubectl create namespace tiller-world
namespace &quot;tiller-world&quot; created
$ kubectl create serviceaccount tiller --namespace tiller-world
serviceaccount &quot;tiller&quot; created
</code></pre>

<p>Define a Role that allows tiller to manage all resources in <code>tiller-world</code> like in <code>role-tiller.yaml</code>:</p>

<pre><code class="language-yaml">kind: Role
apiVersion: rbac.authorization.k8s.io/v1beta1
metadata:
  name: tiller-manager
  namespace: tiller-world
rules:
- apiGroups: [&quot;&quot;, &quot;extensions&quot;, &quot;apps&quot;]
  resources: [&quot;*&quot;]
  verbs: [&quot;*&quot;]
</code></pre>

<pre><code class="language-console">$ kubectl create -f role-tiller.yaml
role &quot;tiller-manager&quot; created
</code></pre>

<p>In <code>rolebinding-tiller.yaml</code>,</p>

<pre><code class="language-yaml">kind: RoleBinding
apiVersion: rbac.authorization.k8s.io/v1beta1
metadata:
  name: tiller-binding
  namespace: tiller-world
subjects:
- kind: ServiceAccount
  name: tiller
  namespace: tiller-world
roleRef:
  kind: Role
  name: tiller-manager
  apiGroup: rbac.authorization.k8s.io
</code></pre>

<pre><code class="language-console">$ kubectl create -f rolebinding-tiller.yaml
rolebinding &quot;tiller-binding&quot; created
</code></pre>

<p>Afterwards you can run <code>helm init</code> to install tiller in the <code>tiller-world</code> namespace.</p>

<pre><code class="language-console">$ helm init --service-account tiller --tiller-namespace tiller-world
$HELM_HOME has been configured at /Users/awesome-user/.helm.

Tiller (the helm server side component) has been installed into your Kubernetes Cluster.
Happy Helming!

$ helm install nginx --tiller-namespace tiller-world --namespace tiller-world
NAME:   wayfaring-yak
LAST DEPLOYED: Mon Aug  7 16:00:16 2017
NAMESPACE: tiller-world
STATUS: DEPLOYED

RESOURCES:
==&gt; v1/Pod
NAME                  READY  STATUS             RESTARTS  AGE
wayfaring-yak-alpine  0/1    ContainerCreating  0         0s
</code></pre>

<h3 id="example-deploy-tiller-in-a-namespace-restricted-to-deploying-resources-in-another-namespace">Example: Deploy tiller in a namespace, restricted to deploying resources in another namespace</h3>

<p>In the example above, we gave Tiller admin access to the namespace it was deployed inside. Now, let&rsquo;s limit Tiller&rsquo;s scope to deploy resources in a different namespace!</p>

<p>For example, let&rsquo;s install tiller in the namespace <code>myorg-system</code> and allow tiller to deploy resources in the namespace <code>myorg-users</code>.</p>

<pre><code class="language-console">$ kubectl create namespace myorg-system
namespace &quot;myorg-system&quot; created
$ kubectl create serviceaccount tiller --namespace myorg-system
serviceaccount &quot;tiller&quot; created
</code></pre>

<p>Define a Role that allows tiller to manage all resources in <code>myorg-users</code> like in <code>role-tiller.yaml</code>:</p>

<pre><code class="language-yaml">kind: Role
apiVersion: rbac.authorization.k8s.io/v1beta1
metadata:
  name: tiller-manager
  namespace: myorg-users
rules:
- apiGroups: [&quot;&quot;, &quot;extensions&quot;, &quot;apps&quot;]
  resources: [&quot;*&quot;]
  verbs: [&quot;*&quot;]
</code></pre>

<pre><code class="language-console">$ kubectl create -f role-tiller.yaml
role &quot;tiller-manager&quot; created
</code></pre>

<p>Bind the service account to that role. In <code>rolebinding-tiller.yaml</code>,</p>

<pre><code class="language-yaml">kind: RoleBinding
apiVersion: rbac.authorization.k8s.io/v1beta1
metadata:
  name: tiller-binding
  namespace: myorg-users
subjects:
- kind: ServiceAccount
  name: tiller
  namespace: myorg-system
roleRef:
  kind: Role
  name: tiller-manager
  apiGroup: rbac.authorization.k8s.io
</code></pre>

<pre><code class="language-console">$ kubectl create -f rolebinding-tiller.yaml
rolebinding &quot;tiller-binding&quot; created
</code></pre>

<p>We&rsquo;ll also need to grant tiller access to read configmaps in myorg-system so it can store release information. In <code>role-tiller-myorg-system.yaml</code>:</p>

<pre><code class="language-yaml">kind: Role
apiVersion: rbac.authorization.k8s.io/v1beta1
metadata:
  namespace: myorg-system
  name: tiller-manager
rules:
- apiGroups: [&quot;&quot;, &quot;extensions&quot;, &quot;apps&quot;]
  resources: [&quot;configmaps&quot;]
  verbs: [&quot;*&quot;]
</code></pre>

<pre><code class="language-console">$ kubectl create -f role-tiller-myorg-system.yaml
role &quot;tiller-manager&quot; created
</code></pre>

<p>And the respective role binding. In <code>rolebinding-tiller-myorg-system.yaml</code>:</p>

<pre><code class="language-yaml">kind: RoleBinding
apiVersion: rbac.authorization.k8s.io/v1beta1
metadata:
  name: tiller-binding
  namespace: myorg-system
subjects:
- kind: ServiceAccount
  name: tiller
  namespace: myorg-system
roleRef:
  kind: Role
  name: tiller-manager
  apiGroup: rbac.authorization.k8s.io
</code></pre>

<pre><code class="language-console">$ kubectl create -f rolebinding-tiller-myorg-system.yaml
rolebinding &quot;tiller-binding&quot; created
</code></pre>

<h2 id="helm-and-role-based-access-control">Helm and Role-based Access Control</h2>

<p>When running a helm client in a pod, in order for the helm client to talk to a tiller instance, it will need certain privileges to be granted. Specifically, the helm client will need to be able to create pods, forward ports and be able to list pods in the namespace where tiller is running (so it can find tiller).</p>

<h3 id="example-deploy-helm-in-a-namespace-talking-to-tiller-in-another-namespace">Example: Deploy Helm in a namespace, talking to Tiller in another namespace</h3>

<p>In this example, we will assume tiller is running in a namespace called <code>tiller-world</code> and that the helm client is running in a namespace called <code>helm-world</code>. By default, tiller is running in the <code>kube-system</code> namespace.</p>

<p>In <code>helm-user.yaml</code>:</p>

<pre><code class="language-yaml">apiVersion: v1
kind: ServiceAccount
metadata:
  name: helm
  namespace: helm-world
---
apiVersion: rbac.authorization.k8s.io/v1beta1
kind: Role
metadata:
  name: tiller-user
  namespace: tiller-world
rules:
- apiGroups:
  - &quot;&quot;
  resources:
  - pods/portforward
  verbs:
  - create
- apiGroups:
  - &quot;&quot;
  resources:
  - pods
  verbs:
  - list
---
apiVersion: rbac.authorization.k8s.io/v1beta1
kind: RoleBinding
metadata:
  name: tiller-user-binding
  namespace: tiller-world
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: tiller-user
subjects:
- kind: ServiceAccount
  name: helm
  namespace: helm-world
</code></pre>

<pre><code class="language-console">$ kubectl create -f helm-user.yaml
serviceaccount &quot;helm&quot; created
role &quot;tiller-user&quot; created
rolebinding &quot;tiller-user-binding&quot; created
</code></pre>

<h1 id="using-ssl-between-helm-and-tiller">Using SSL Between Helm and Tiller</h1>

<p>This document explains how to create strong SSL/TLS connections between Helm and
Tiller. The emphasis here is on creating an internal CA, and using both the
cryptographic and identity functions of SSL.</p>

<blockquote>
<p>Support for TLS-based auth was introduced in Helm 2.3.0</p>
</blockquote>

<p>Configuring SSL is considered an advanced topic, and knowledge of Helm and Tiller
is assumed.</p>

<h2 id="overview">Overview</h2>

<p>The Tiller authentication model uses client-side SSL certificates. Tiller itself
verifies these certificates using a certificate authority. Likewise, the client
also verifies Tiller&rsquo;s identity by certificate authority.</p>

<p>There are numerous possible configurations for setting up certificates and authorities,
but the method we cover here will work for most situations.</p>

<blockquote>
<p>As of Helm 2.7.2, Tiller <em>requires</em> that the client certificate be validated
by its CA. In prior versions, Tiller used a weaker validation strategy that
allowed self-signed certificates.</p>
</blockquote>

<p>In this guide, we will show how to:</p>

<ul>
<li>Create a private CA that is used to issue certificates for Tiller clients and
servers.</li>
<li>Create a certificate for Tiller</li>
<li>Create a certificate for the Helm client</li>
<li>Create a Tiller instance that uses the certificate</li>
<li>Configure the Helm client to use the CA and client-side certificate</li>
</ul>

<p>By the end of this guide, you should have a Tiller instance running that will
only accept connections from clients who can be authenticated by SSL certificate.</p>

<h2 id="generating-certificate-authorities-and-certificates">Generating Certificate Authorities and Certificates</h2>

<p>One way to generate SSL CAs is via the <code>openssl</code> command line tool. There are many
guides and best practices documents available online. This explanation is focused
on getting ready within a small amount of time. For production configurations,
we urge readers to read <a href="https://www.openssl.org">the official documentation</a> and
consult other resources.</p>

<h3 id="generate-a-certificate-authority">Generate a Certificate Authority</h3>

<p>The simplest way to generate a certificate authority is to run two commands:</p>

<pre><code class="language-console">$ openssl genrsa -out ./ca.key.pem 4096
$ openssl req -key ca.key.pem -new -x509 -days 7300 -sha256 -out ca.cert.pem -extensions v3_ca
Enter pass phrase for ca.key.pem:
You are about to be asked to enter information that will be incorporated
into your certificate request.
What you are about to enter is what is called a Distinguished Name or a DN.
There are quite a few fields but you can leave some blank
For some fields there will be a default value,
If you enter '.', the field will be left blank.
-----
Country Name (2 letter code) [AU]:US
State or Province Name (full name) [Some-State]:CO
Locality Name (eg, city) []:Boulder
Organization Name (eg, company) [Internet Widgits Pty Ltd]:tiller
Organizational Unit Name (eg, section) []:
Common Name (e.g. server FQDN or YOUR name) []:tiller
Email Address []:tiller@example.com
</code></pre>

<p>Note that the data input above is <em>sample data</em>. You should customize to your own
specifications.</p>

<p>The above will generate both a secret key and a CA. Note that these two files are
very important. The key in particular should be handled with particular care.</p>

<p>Often, you will want to generate an intermediate signing key. For the sake of brevity,
we will be signing keys with our root CA.</p>

<h3 id="generating-certificates">Generating Certificates</h3>

<p>We will be generating two certificates, each representing a type of certificate:</p>

<ul>
<li>One certificate is for Tiller. You will want one of these <em>per tiller host</em> that
you run.</li>
<li>One certificate is for the user. You will want one of these <em>per helm user</em>.</li>
</ul>

<p>Since the commands to generate these are the same, we&rsquo;ll be creating both at the
same time. The names will indicate their target.</p>

<p>First, the Tiller key:</p>

<pre><code class="language-console">$ openssl genrsa -out ./tiller.key.pem 4096
Generating RSA private key, 4096 bit long modulus
..........................................................................................................................................................................................................................................................................................................................++
............................................................................++
e is 65537 (0x10001)
Enter pass phrase for ./tiller.key.pem:
Verifying - Enter pass phrase for ./tiller.key.pem:
</code></pre>

<p>Next, generate the Helm client&rsquo;s key:</p>

<pre><code class="language-console">$ openssl genrsa -out ./helm.key.pem 4096
Generating RSA private key, 4096 bit long modulus
.....++
......................................................................................................................................................................................++
e is 65537 (0x10001)
Enter pass phrase for ./helm.key.pem:
Verifying - Enter pass phrase for ./helm.key.pem:
</code></pre>

<p>Again, for production use you will generate one client certificate for each user.</p>

<p>Next we need to create certificates from these keys. For each certificate, this is
a two-step process of creating a CSR, and then creating the certificate.</p>

<pre><code class="language-console">$ openssl req -key tiller.key.pem -new -sha256 -out tiller.csr.pem
Enter pass phrase for tiller.key.pem:
You are about to be asked to enter information that will be incorporated
into your certificate request.
What you are about to enter is what is called a Distinguished Name or a DN.
There are quite a few fields but you can leave some blank
For some fields there will be a default value,
If you enter '.', the field will be left blank.
-----
Country Name (2 letter code) [AU]:US
State or Province Name (full name) [Some-State]:CO
Locality Name (eg, city) []:Boulder
Organization Name (eg, company) [Internet Widgits Pty Ltd]:Tiller Server
Organizational Unit Name (eg, section) []:
Common Name (e.g. server FQDN or YOUR name) []:tiller-server
Email Address []:

Please enter the following 'extra' attributes
to be sent with your certificate request
A challenge password []:
An optional company name []:
</code></pre>

<p>And we repeat this step for the Helm client certificate:</p>

<pre><code class="language-console">$ openssl req -key helm.key.pem -new -sha256 -out helm.csr.pem
# Answer the questions with your client user's info
</code></pre>

<p>(In rare cases, we&rsquo;ve had to add the <code>-nodes</code> flag when generating the request.)</p>

<p>Now we sign each of these CSRs with the CA certificate we created:</p>

<pre><code class="language-console">$ openssl x509 -req -CA ca.cert.pem -CAkey ca.key.pem -CAcreateserial -in tiller.csr.pem -out tiller.cert.pem
Signature ok
subject=/C=US/ST=CO/L=Boulder/O=Tiller Server/CN=tiller-server
Getting CA Private Key
Enter pass phrase for ca.key.pem:
</code></pre>

<p>And again for the client certificate:</p>

<pre><code class="language-console">$ openssl x509 -req -CA ca.cert.pem -CAkey ca.key.pem -CAcreateserial -in helm.csr.pem -out helm.cert.pem
</code></pre>

<p>At this point, the important files for us are these:</p>

<pre><code># The CA. Make sure the key is kept secret.
ca.cert.pem
ca.key.pem
# The Helm client files
helm.cert.pem
helm.key.pem
# The Tiller server files.
tiller.cert.pem
tiller.key.pem
</code></pre>

<p>Now we&rsquo;re ready to move on to the next steps.</p>

<h2 id="creating-a-custom-tiller-installation">Creating a Custom Tiller Installation</h2>

<p>Helm includes full support for creating a deployment configured for SSL. By specifying
a few flags, the <code>helm init</code> command can create a new Tiller installation complete
with all of our SSL configuration.</p>

<p>To take a look at what this will generate, run this command:</p>

<pre><code class="language-console">$ helm init --dry-run --debug --tiller-tls --tiller-tls-cert ./tiller.cert.pem --tiller-tls-key ./tiller.key.pem --tiller-tls-verify --tls-ca-cert ca.cert.pem
</code></pre>

<p>The output will show you a Deployment, a Secret, and a Service. Your SSL information
will be preloaded into the Secret, which the Deployment will mount to pods as they
start up.</p>

<p>If you want to customize the manifest, you can save that output to a file and then
use <code>kubectl create</code> to load it into your cluster.</p>

<blockquote>
<p>We strongly recommend enabling RBAC on your cluster and adding <a href="./#rbac">service accounts</a>
with RBAC.</p>
</blockquote>

<p>Otherwise, you can remove the <code>--dry-run</code> and <code>--debug</code> flags. We also recommend
putting Tiller in a non-system namespace (<code>--tiller-namespace=something</code>) and enable
a service account (<code>--service-account=somename</code>). But for this example we will stay
with the basics:</p>

<pre><code class="language-console">$ helm init --tiller-tls --tiller-tls-cert ./tiller.cert.pem --tiller-tls-key ./tiller.key.pem --tiller-tls-verify --tls-ca-cert ca.cert.pem
</code></pre>

<p>In a minute or two it should be ready. We can check Tiller like this:</p>

<pre><code class="language-console">$ kubectl -n kube-system get deployment
NAME            DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE
... other stuff
tiller-deploy   1         1         1            1           2m
</code></pre>

<p>If there is a problem, you may want to use <code>kubectl get pods -n kube-system</code> to
find out what went wrong. With the SSL/TLS support, the most common problems all
have to do with improperly generated TLS certificates or accidentally swapping the
cert and the key.</p>

<p>At this point, you should get a <em>failure</em> when you run basic Helm commands:</p>

<pre><code class="language-console">$ helm ls
Error: transport is closing
</code></pre>

<p>This is because your Helm client does not have the correct certificate to authenticate
to Tiller.</p>

<h2 id="configuring-the-helm-client">Configuring the Helm Client</h2>

<p>The Tiller server is now running with TLS protection. It&rsquo;s time to configure the
Helm client to also perform TLS operations.</p>

<p>For a quick test, we can specify our configuration manually. We&rsquo;ll run a normal
Helm command (<code>helm ls</code>), but with SSL/TLS enabled.</p>

<pre><code class="language-console">helm ls --tls --tls-ca-cert ca.cert.pem --tls-cert helm.cert.pem --tls-key helm.key.pem
</code></pre>

<p>This configuration sends our client-side certificate to establish identity, uses
the client key for encryption, and uses the CA certificate to validate the remote
Tiller&rsquo;s identity.</p>

<p>Typing a line that that is cumbersome, though. The shortcut is to move the key,
cert, and CA into <code>$HELM_HOME</code>:</p>

<pre><code class="language-console">$ cp ca.cert.pem $(helm home)/ca.pem
$ cp helm.cert.pem $(helm home)/cert.pem
$ cp helm.key.pem $(helm home)/key.pem
</code></pre>

<p>With this, you can simply run <code>helm ls --tls</code> to enable TLS.</p>

<h3 id="troubleshooting">Troubleshooting</h3>

<p><em>Running a command, I get <code>Error: transport is closing</code></em></p>

<p>This is almost always due to a configuration error in which the client is missing
a certificate (<code>--tls-cert</code>) or the certificate is bad.</p>

<p><em>I&rsquo;m using a certificate, but get <code>Error: remote error: tls: bad certificate</code></em></p>

<p>This means that Tiller&rsquo;s CA cannot verify your certificate. In the examples above,
we used a single CA to generate both the client and server certificates. In these
examples, the CA has <em>signed</em> the client&rsquo;s certificate. We then load that CA
up to Tiller. So when the client certificate is sent to the server, Tiller
checks the client certificate against the CA.</p>

<p><em>If I use <code>--tls-verify</code> on the client, I get <code>Error: x509: certificate is valid for tiller-server, not localhost</code></em></p>

<p>If you plan to use <code>--tls-verify</code> on the client, you will need to make sure that
the host name that Helm connects to matches the host name on the certificate. In
some cases this is awkward, since Helm will connect over localhost, or the FQDN is
not available for public resolution.</p>

<h2 id="references">References</h2>

<p><a href="https://github.com/denji/golang-tls">https://github.com/denji/golang-tls</a>
<a href="https://www.openssl.org/docs/">https://www.openssl.org/docs/</a>
<a href="https://jamielinux.com/docs/openssl-certificate-authority/sign-server-and-client-certificates.html">https://jamielinux.com/docs/openssl-certificate-authority/sign-server-and-client-certificates.html</a></p>

<h1 id="securing-your-helm-installation">Securing your Helm Installation</h1>

<p>Helm is a powerful and flexible package-management and operations tool for Kubernetes. Installing it using the default installation command &ndash; <code>helm init</code> &ndash; quickly and easily installs <strong>Tiller</strong>, the server-side component with which Helm corresponds.</p>

<p>This default installation applies <strong><em>no security configurations</em></strong>, however. It&rsquo;s completely appropriate to use this type of installation when you are working against a cluster with no or very few security concerns, such as local development with Minikube or with a cluster that is well-secured in a private network with no data-sharing or no other users or teams. If this is the case, then the default installation is fine, but remember: With great power comes great responsibility. Always use due diligence when deciding to use the default installation.</p>

<h2 id="who-needs-security-configurations">Who Needs Security Configurations?</h2>

<p>For the following types of clusters we strongly recommend that you apply the proper security configurations to Helm and Tiller to ensure the safety of the cluster, the data in it, and the network to which it is connected.</p>

<ul>
<li>Clusters that are exposed to uncontrolled network environments: either untrusted network actors can access the cluster, or untrusted applications that can access the network environment.</li>
<li>Clusters that are for many people to use &ndash; <em>multitenant</em> clusters &ndash; as a shared environment</li>
<li>Clusters that have access to or use high-value data or networks of any type</li>
</ul>

<p>Often, environments like these are referred to as <em>production grade</em> or <em>production quality</em> because the damage done to any company by misuse of the cluster can be profound for either customers, the company itself, or both. Once the risk of damage becomes high enough, you need to ensure the integrity of your cluster no matter what the actual risk.</p>

<p>To configure your installation properly for your environment, you must:</p>

<ul>
<li>Understand the security context of your cluster</li>
<li>Choose the Best Practices you should apply to your helm installation</li>
</ul>

<p>The following assumes you have a Kubernetes configuration file (a <em>kubeconfig</em> file) or one was given to you to access a cluster.</p>

<h2 id="understanding-the-security-context-of-your-cluster">Understanding the Security Context of your Cluster</h2>

<p><code>helm init</code> installs Tiller into the cluster in the <code>kube-system</code> namespace and without any RBAC rules applied. This is appropriate for local development and other private scenarios because it enables you to be productive immediately. It also enables you to continue running Helm with existing Kubernetes clusters that do not have role-based access control (RBAC) support until you can move your workloads to a more recent Kubernetes version.</p>

<p>There are four main areas to consider when securing a tiller installation:</p>

<ol>
<li>Role-based access control, or RBAC</li>
<li>Tiller&rsquo;s gRPC endpoint and its usage by Helm</li>
<li>Tiller release information</li>
<li>Helm charts</li>
</ol>

<h3 id="rbac">RBAC</h3>

<p>Recent versions of Kubernetes employ a <a href="https://en.wikipedia.org/wiki/Role-based_access_control">role-based access control (or RBAC)</a> system (as do modern operating systems) to help mitigate the damage that can done if credentials are misused or bugs exist. Even where an identity is hijacked, the identity has only so many permissions to a controlled space. This effectively adds a layer of security to limit the scope of any attack with that identity.</p>

<p>Helm and Tiller are designed to install, remove, and modify logical applications that can contain many services interacting together. As a result, often its usefulness involves cluster-wide operations, which in a multitenant cluster means that great care must be taken with access to a cluster-wide Tiller installation to prevent improper activity.</p>

<p>Specific users and teams &ndash; developers, operators, system and network administrators &ndash; will need their own portion of the cluster in which they can use Helm and Tiller without risking other portions of the cluster. This means using a Kubernetes cluster with RBAC enabled and Tiller configured to enforce them. For more information about using RBAC in Kubernetes, see <a href="./#rbac">Using RBAC Authorization</a>.</p>

<h4 id="tiller-and-user-permissions">Tiller and User Permissions</h4>

<p>Tiller in its current form does not provide a way to map user credentials to specific permissions within Kubernetes. When Tiller is running inside of the cluster, it operates with the permissions of its service account. If no service account name is supplied to Tiller, it runs with the default service account for that namespace. This means that all Tiller operations on that server are executed using the Tiller pod&rsquo;s credentials and permissions.</p>

<p>To properly limit what Tiller itself can do, the standard Kubernetes RBAC mechanisms must be attached to Tiller, including Roles and RoleBindings that place explicit limits on what things a Tiller instance can install, and where.</p>

<p>This situation may change in the future. While the community has several methods that might address this, at the moment performing actions using the rights of the client, instead of the rights of Tiller, is contingent upon the outcome of the Pod Identity Working Group, which has taken on the task of solving the problem in a general way.</p>

<h3 id="the-tiller-grpc-endpoint-and-tls">The Tiller gRPC Endpoint and TLS</h3>

<p>In the default installation the gRPC endpoint that Tiller offers is available inside the cluster (not external to the cluster) without authentication configuration applied. Without applying authentication, any process in the cluster can use the gRPC endpoint to perform operations inside the cluster. In a local or secured private cluster, this enables rapid usage and is normal. (When running outside the cluster, Helm authenticates through the Kubernetes API server to reach Tiller, leveraging existing Kubernetes authentication support.)</p>

<p>Shared and production clusters &ndash; for the most part &ndash; should use Helm 2.7.2 at a minimum and configure TLS for each the Tiller gRPC endpoint to ensure that within the cluster usage of gRPC endpoints is only for the properly authenticated identity for that endpoint. Doing so enables any number of Tiller instances to be deployed in any number of namespaces and yet no unauthenticated usage of any gRPC endpoint is possible. Finally, usage of Helm <code>init</code> with the <code>--tiller-tls-verify</code> option to install Tiller with TLS enabled and to verify remote certificates, and other Helm commands should use the <code>--tls</code> with all other commands.</p>

<p>For more information about the proper steps to configure Tiller and use Helm properly with TLS configured, see <a href="./#using-ssl-between-helm-and-tiller">Using SSL between Helm and Tiller</a>.</p>

<p>When Helm clients are connecting from outside of the cluster, the security between the Helm client and the API server is managed by Kubernetes itself. You may want to ensure that this link is secure. Note that if you are using the TLS configuration recommended above, not even the Kubernetes API server has access to the unencrypted messages between the client and Tiller.</p>

<h3 id="tiller-s-release-information">Tiller&rsquo;s Release Information</h3>

<p>For historical reasons, Tiller stores its release information in ConfigMaps. We suggest changing the default to Secrets.</p>

<p>Secrets are the Kubernetes accepted mechanism for saving configuration data that is considered sensitive. While secrets don&rsquo;t themselves offer many protections, Kubernetes cluster management software often treats them differently than other objects. Thus, we suggest using secrets to store releases.</p>

<p>Enabling this feature currently requires setting the <code>--storage=secret</code> flag in the tiller-deploy deployment. This entails directly modifying the deployment or using <code>helm init --override=...</code>, as no helm init flag is currently available to do this for you. For more information, see <a href="install.md#using---override">Using &ndash;override</a>.</p>

<h3 id="thinking-about-charts">Thinking about Charts</h3>

<p>Because of the relative longevity of Helm, the Helm chart ecosystem evolved without the immediate concern for cluster-wide control, and especially in the developer space this makes complete sense. However, charts are a kind of package that not only installs containers you may or may not have validated yourself, but it may also install into more than one namespace.</p>

<p>As with all shared software, in a controlled or shared environment you must validate all software you install yourself <em>before</em> you install it. If you have secured Tiller with TLS and have installed it with permissions to only one or a subset of namespaces, some charts may fail to install &ndash; but in these environments, that is exactly what you want. If you need to use the chart, you may have to work with the creator or modify it yourself in order to use it securely in a mulitenant cluster with proper RBAC rules applied. The <code>helm template</code> command renders the chart locally and displays the output.</p>

<p>Once vetted, you can use Helm&rsquo;s provenance tools to <a href="./#helm-provenance-and-integrity">ensure the provenance and integrity of charts</a> that you use.</p>

<h3 id="grpc-tools-and-secured-tiller-configurations">gRPC Tools and Secured Tiller Configurations</h3>

<p>Many very useful tools use the gRPC interface directly, and having been built against the default installation &ndash; which provides cluster-wide access &ndash; may fail once security configurations have been applied. RBAC policies are controlled by you or by the cluster operator, and either can be adjusted for the tool, or the tool can be configured to work properly within the constraints of specific RBAC policies applied to Tiller. The same may need to be done if the gRPC endpoint is secured: the tools need their own secure TLS configuration in order to use a specific Tiller instance. The combination of RBAC policies and a secured gRPC endpoint configured in conjunction with gRPC tools enables you to control your cluster environment as you should.</p>

<h2 id="best-practices-for-securing-helm-and-tiller">Best Practices for Securing Helm and Tiller</h2>

<p>The following guidelines reiterate the Best Practices for securing Helm and Tiller and using them correctly.</p>

<ol>
<li>Create a cluster with RBAC enabled</li>
<li>Configure each Tiller gRPC endpoint to use a separate TLS certificate</li>
<li>Release information should be a Kubernetes Secret</li>
<li>Install one Tiller per user, team, or other organizational entity with the <code>--service-account</code> flag, Roles, and RoleBindings</li>
<li>Use the <code>--tiller-tls-verify</code> option with <code>helm init</code> and the <code>--tls</code> flag with other Helm commands to enforce verification</li>
</ol>

<p>If these steps are followed, an example <code>helm init</code> command might look something like this:</p>

<pre><code class="language-bash">$ helm init \ 
tiller-tls \ 
tiller-tls-verify \ 
tiller-tls-ca-cert=ca.pem \ 
tiller-tls-cert=cert.pem \ 
tiller-tls-key=key.pem \ 
service-account=accountname  
</code></pre>

<p>This command will start Tiller with both strong authentication over gRPC, and a service account to which RBAC policies have been applied.</p>
</div>
</article>
          
        </div>
        <div class="small-1 columns">&nbsp;</div>
      </div>

      <div class="row collapse" id="contrib">
        <div class="contrib-text">
          <p class="text-center lead">
            <a href="https://helm.sh">Helm</a> is supported by and built with a community of over 250 developers.
          </p>
          <p class="text-center">
            <a href="https://helm.sh">helm.sh</a> and <a href="https://docs.helm.sh">docs.helm.sh</a> are maintained by <img src="../src/img/microsoft.png" alt="Microsoft" class="">
          </p>
        </div>
      </div>
    </div>

    
    </div> 

    <a class="exit-off-canvas"></a>

    </div> 
  </div> 

    

  <script src="//cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
  <script src="../src/js/main.min.js"></script>
  <script src="../src/js/app_init.min.js"></script>

</body>
</html>