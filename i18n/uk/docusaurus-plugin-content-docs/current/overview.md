---
sidebar_position: 1
sidebar_label: Огляд Helm 4
---

# Огляд Helm 4

Helm v4 є значним кроком вперед порівняно з v3, запроваджуючи кардинальні зміни, нові архітектурні шаблони та розширену функціональність, зберігаючи при цьому зворотну сумісність чартів.

Більш детальну інформацію про заплановані етапи випуску Helm 4 дивіться у статті [Шлях до випуску Helm v4](/blog/path-to-helm-v4/).

## Що нового {#whats-new}

У цьому розділі наведено огляд нововведень у Helm 4, включаючи кардинальні зміни, основні нові функції та інші вдосконалення. Повні технічні деталі див. у [Повному переліку змін](changelog.md).

### Огляд {#summary}

- **Нові функції**: втулки на основі Wasm, kstatus watcher, підтримка OCI digest, значення multi-doc, аргументи JSON
- **Зміни в архітектурі**: повністю перероблена система втулків, реструктуризація пакетів, перейменування прапорців CLI, перехід на версійні пакети, підтримка chart v3, кешування на основі вмісту
- **Модернізація**: міграція slog, оновлення до Go 1.24, очищення залежностей
- **Безпека**: розширена підтримка OCI/реєстру, вдосконалення TLS

### Істотні зміни {#breaking-changes}

#### Пострендери, реалізовані як втулки {#post-renderers-implemented-as-plugins}

Пострендери реалізовані як втулки. З цією зміною більше неможливо передавати виконуваний файл безпосередньо до `helm render --post-renderer`, але необхідно передавати назву втулка. Це може вимагати оновлення наявних робочих процесів пострендера.

#### Для входу в реєстр не приймаються повні URL-адреси {#registry-login-does-not-accept-full-urls}

Команда `helm registry login` повинна виконуватися тільки з доменним імʼям у v4. Це необхідно для того, щоб у майбутньому можна було здійснювати вхід на різних рівнях реєстру.

### Нові функції {#new-features}

#### Переробка системи втулків {#plugin-system-overhaul}

Helm 4 представляє опціональну систему виконання на базі WebAssembly для підвищення безпеки та розширення можливостей. Наявні втулки продовжують працювати, але нова система виконання відкриває більше можливостей для налаштування базової поведінки Helm для налаштування втулків. Helm 4 запускається з трьома типами втулків: втулками CLI, втулками getter та втулками post-renderer, а також системою, яка дозволяє використовувати нові типи втулків для налаштування додаткових базових функцій. Дивіться [HIP-0026 plugin system](https://github.com/helm/community/blob/main/hips/hip-0026.md) та [Helm 4 example plugins](https://github.com/scottrigby/h4-example-plugins).

:::tip
Існуючі втулки працюють як і раніше. Нова система виконання WebAssembly є опціональною, але рекомендується для підвищення безпеки.
:::

#### Кращий моніторинг ресурсів {#better-resource-monitoring}

Нова інтеграція kstatus показує детальний статус ваших розгортань (deployments). Протестуйте її на комплексних застосунках, щоб перевірити, чи вона краще виявляє проблеми.

#### Розширена підтримка OCI {#enhanced-oci-support}

Встановлюйте чарти за допомогою дайджестів для кращої безпеки ланцюгів постачання. Наприклад, `helm install myapp oci://registry.example.com/charts/app@sha256:abc123...`. Чарти з невідповідними дайджестами не встановлюються.

#### Значення з декількох документів {#multi-document-values}

Розділіть комплексні значення між декількома файлами YAML. Ідеально підходить для тестування різних конфігурацій середовища.

#### Застосування на стороні сервера {#server-side-apply}

Краще вирішення конфліктів, коли кілька інструментів керують тими самими ресурсами. Тестуйте в середовищах з операторами або іншими контролерами.

#### Функції у шаблонах користувачів {#custom-template-functions}

Розширте можливості шаблонів Helm власними функціями за допомогою втулків. Чудово підходить для потреб організації у створенні шаблонів.

#### Пострендери як втулки {#post-renderers-as-plugins}

Пострендери реалізовані як втулки, що забезпечує кращу інтеграцію та більше можливостей.

#### Стабільний SDK API {#stable-sdk-api}

Зміни в API, що порушують сумісність, тепер завершені. Тестуйте, ламайте, давайте відгуки! API також підтримує додаткові версії чартів, відкриваючи можливості для нових функцій у майбутній версії Charts v3.

#### Charts v3

Скоро. Чарти v2 продовжують працювати без змін.

### Покращення {#improvements}

#### Продуктивність {#performance}

Швидша обробка залежностей та нове кешування чартів на основі вмісту.

#### Повідомлення про помилки {#error-messages}

Більш чіткі та корисні повідомлення про помилки.

#### Автентифікація в реєстрі {#registry-authentication}

Краща підтримка OAuth та токенів для приватних реєстрів.

#### Перейменовані прапорці CLI {#cli-flags-renamed}

Деякі поширені прапорці CLI перейменовано, щоб краще пояснити їхню роботу. Наявні прапорці залишаються, але видають попередження про їхню застарілість:

- `--atomic` → `--rollback-on-failure`
- `--force` → `--force-replace`

Оновіть будь-які автоматизації, які використовують ці перейменовані прапорці CLI.

## Оновлення до Helm 4 {#upgrading-to-helm-4}

Хоча ми докладаємо всіх зусиль, щоб Helm 4 був надійним для всіх, Helm 4 є абсолютно новим. З цією метою перед оновленням ми додали нижче кілька порад щодо конкретних речей, на які слід звернути увагу під час тестування Helm 4 з вашими наявними робочими процесами. Як завжди, ми будемо вдячні за всі відгуки про те, що працює, що не працює і що можна покращити.

### Високий пріоритет {#high-priority}

* Перевірте свої наявні чарти та випуски, щоб переконатися, що вони все ще працюють з v4.
* Перевірте всі 3 типи втулків (CLI, getter, post-renderer).
* Спробуйте створити втулки WebAssembly з новим середовищем виконання (дивіться [приклади втулків](https://github.com/scottrigby/h4-example-plugins))
* Користувачі SDK: протестуйте стабільний API. Спробуйте зламати його та поділіться своїми відгуками.
* Протестуйте свої CI/CD- конвеєри та виправте будь-які помилки скриптів, повʼязані зі зміною імен прапорців CLI.
* Протестуйте інтеграції post-renderer.
* Протестуйте автентифікацію в реєстрі та встановлення чартів у ваших робочих процесах OCI.

### Інше {#other}

* Випробуйте інші нові функції, зокрема значення для декількох документів, встановлення на основі дайджесту та функції налаштування шаблонів.
* Випробуйте продуктивність Helm 4 із великими комплексними чартами, щоб перевірити, чи помітно пришвидшиться робота ваших робочих навантажень.
* Спробуйте навмисно порушити роботу системи, щоб перевірити, чи корисні оновлені повідомлення про помилки.

### Відгуки {#feedback}

* Які ще типи втулків ви хотіли б додати для налаштування основних функцій Helm?
* З огляду на те, що API підтримує додаткові версії чартів, які нові функції ви хотіли б бачити в Charts v3?

## Як надати відгук {#how-to-give-feedback}

Знайшли проблеми? Маєте пропозиції? Ми хочемо почути вашу думку до випуску в листопаді:

### GitHub Issues {#github-issues}

Перегляньте [список відкритих питань та запитів на додавання функцій](https://github.com/helm/helm/issues) у репозиторії Helm. Додайте коментарі до наявних або [створіть нові](https://github.com/helm/helm/issues/new/choose) питання та запити.

### Slack спільноти {#community-slack}

Приєднуйтесь до каналів в [Slack Kubernetes](https://slack.kubernetes.io/):

- `#helm-dev` для обговорення питань розробки
- `#helm-users` для підтримки користувачів та відгуків про тестування

### Щотижневі зустрічі розробників {#weekly-dev-meetings}

Приєднуйтесь до живої дискусії з супровідниками щочетверга о 9:30 за тихоокеанським часом на [Zoom](https://zoom.us/j/696660622?pwd=MGsraXZ1UkVlTkJLc1B5U05KN053QT09).

Більше варіантів можна знайти в [інформації про комунікацію](https://github.com/helm/community/blob/main/communication.md) спільноти Helm.
