[build]
  command = "make build"
  publish = "app"

[build.environment]
  HUGO_VERSION = "0.138.0"
  HUGO_ENABLEGITINFO = "true"

[context.production.environment]
  HUGO_ENV = "production"

[context.deploy-preview]
  command = "make build-preview"

[context.branch-deploy]
  command = "make build-preview"

# redirect docs homepage
[[redirects]]
  from = "https://docs.helm.sh/"
  to = "https://helm.sh/docs/"

# redirect docs subpages
[[redirects]]
  from = "https://docs.helm.sh/*"
  to = "https://helm.sh/docs/:splat"

[[redirects]]
  from = "/docs/developing_charts/"
  to = "https://helm.sh/docs/2/developing-charts/"

# Go module import support handled by static HTML files in /static/
# These paths serve HTML with go-import meta tags + client-side redirects

# redirect Go package lookups
[[redirects]]
  from = "/helm/v3/*"
  to = "/helm/v3"
  status = 200

[[redirects]]
  from = "/helm/v2/*"
  to = "/helm/v2"
  status = 200

# custom external redirects
[[redirects]]
  from = "/calendar/release"
  to = "https://calendar.google.com/calendar/u/0/embed?src=8tji8e0obp5skr2pval9g55ftk@group.calendar.google.com"
  status = 302

[[redirects]]
  from = "/v4-launch-party-sponsorship"
  to = "https://docs.google.com/document/d/10cyzggPiLeLz169cDF1UaUMmM4uZx6rO3Bw9rRQRjJA/edit?usp=sharing"
  status = 302

# Redirect v2 docs to new combined site
# Category-level redirects only (fragments not supported by Netlify)
# TODO: Change status codes from 302 to 301 after cutover verification

[[redirects]]
  from = "https://v2.helm.sh/docs/using_helm/"
  to = "/docs/2/using-helm/"
  status = 302

[[redirects]]
  from = "https://v2.helm.sh/docs/helm/"
  to = "/docs/commands"
  status = 302

[[redirects]]
  from = "https://v2.helm.sh/docs/developing_charts/"
  to = "/docs/2/developing-charts/"
  status = 302

[[redirects]]
  from = "https://v2.helm.sh/docs/related/"
  to = "/docs/community/related/"
  status = 302

[[redirects]]
  from = "https://v2.helm.sh/docs/architecture/"
  to = "/docs/topics/architecture/"
  status = 302

[[redirects]]
  from = "https://v2.helm.sh/docs/developers/"
  to = "/docs/community/developers/"
  status = 302

[[redirects]]
  from = "https://v2.helm.sh/docs/history/"
  to = "/docs/community/history/"
  status = 302

# Additional from v3 docs md headers hugo aliases key
[[redirects]]
  from = "/docs/advanced_helm_techniques"
  to = "/docs/topics/advanced/"
  status = 302

[[redirects]]
  from = "/docs/chart_repository/"
  to = "/docs/topics/chart_repository/"
  status = 302

[[redirects]]
  from = "/docs/chart_repository_sync_example/"
  to = "/docs/howto/chart_repository_sync_example/"
  status = 302

[[redirects]]
  from = "/docs/chart_tests/"
  to = "/docs/topics/chart_tests/"
  status = 302

[[redirects]]
  from = "/docs/charts_hooks/"
  to = "/docs/topics/charts_hooks/"
  status = 302

[[redirects]]
  from = "/docs/charts_tips_and_tricks/"
  to = "/docs/howto/charts_tips_and_tricks/"
  status = 302

[[redirects]]
  from = "/docs/gosdk"
  to = "/docs/sdk/gosdk/"
  status = 302

[[redirects]]
  from = "/docs/install/"
  to = "/docs/intro/install/"
  status = 302

[[redirects]]
  from = "/docs/kubernetes_distros/"
  to = "/docs/topics/kubernetes_distros/"
  status = 302

[[redirects]]
  from = "/docs/localization/"
  to = "/docs/community/localization/"
  status = 302

[[redirects]]
  from = "/docs/permissions_sql_storage_backend/"
  to = "/docs/topics/permissions_sql_storage_backend/"
  status = 302

[[redirects]]
  from = "/docs/plugins/"
  to = "/docs/topics/plugins/"
  status = 302

[[redirects]]
  from = "/docs/provenance/"
  to = "/docs/topics/provenance/"
  status = 302

[[redirects]]
  from = "/docs/quickstart/"
  to = "/docs/intro/quickstart/"
  status = 302

[[redirects]]
  from = "/docs/rbac/"
  to = "/docs/topics/rbac/"
  status = 302

[[redirects]]
  from = "/docs/registries/"
  to = "/docs/topics/registries/"
  status = 302

[[redirects]]
  from = "/docs/topics/chart_best_practices/"
  to = "/docs/chart_best_practices/"
  status = 302

[[redirects]]
  from = "/docs/topics/chart_best_practices/conventions/"
  to = "/docs/chart_best_practices/conventions/"
  status = 302

[[redirects]]
  from = "/docs/topics/chart_best_practices/custom_resource_definitions/"
  to = "/docs/chart_best_practices/custom_resource_definitions/"
  status = 302

[[redirects]]
  from = "/docs/topics/chart_best_practices/dependencies/"
  to = "/docs/chart_best_practices/dependencies/"
  status = 302

[[redirects]]
  from = "/docs/topics/chart_best_practices/labels/"
  to = "/docs/chart_best_practices/labels/"
  status = 302

[[redirects]]
  from = "/docs/topics/chart_best_practices/pods/"
  to = "/docs/chart_best_practices/pods/"
  status = 302

[[redirects]]
  from = "/docs/topics/chart_best_practices/rbac/"
  to = "/docs/chart_best_practices/rbac/"
  status = 302

[[redirects]]
  from = "/docs/topics/chart_best_practices/templates/"
  to = "/docs/chart_best_practices/templates/"
  status = 302

[[redirects]]
  from = "/docs/topics/chart_best_practices/values/"
  to = "/docs/chart_best_practices/values/"
  status = 302

[[redirects]]
  from = "/docs/topics/faq/"
  to = "/docs/faq/"
  status = 302

[[redirects]]
  from = "/intro/getting_started/"
  to = "/docs/chart_template_guide/getting_started/"
  status = 302

[[redirects]]
  from = "/topics/chart_template_guide/"
  to = "/docs/chart_template_guide/"
  status = 302

[[redirects]]
  from = "/docs/k8s_apis/"
  to = "/docs/topics/kubernetes_apis/"
  status = 302

[[redirects]]
  from = "/docs/library_charts/"
  to = "/docs/topics/library_charts/"
  status = 302
# Additional redirects for Hugo frontmatter aliases removed during v3 migration
[[redirects]]
  from = "/docs/developers/"
  to = "/docs/community/developers/"
  status = 302

[[redirects]]
  from = "/docs/history/"
  to = "/docs/community/history/"
  status = 302

[[redirects]]
  from = "/docs/related/"
  to = "/docs/community/related/"
  status = 302

[[redirects]]
  from = "/docs/faq/"
  to = "/docs/faq/"
  status = 302

[[redirects]]
  from = "/docs/using_helm/"
  to = "/docs/intro/"
  status = 302

[[redirects]]
  from = "/docs/architecture/"
  to = "/docs/topics/architecture/"
  status = 302

[[redirects]]
  from = "/docs/developing_charts/"
  to = "/docs/topics/charts/"
  status = 302

[[redirects]]
  from = "/developing_charts/"
  to = "/docs/topics/charts/"
  status = 302

# End of Hugo frontmatter aliases redirects
